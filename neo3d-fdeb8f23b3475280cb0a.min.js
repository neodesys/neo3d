/*! Neo3D | Released under the GPLv3 | Copyright(C) 2015, LoÃ¯c Le Page */!function(r){var t={};function e(f){if(t[f])return t[f].exports;var u=t[f]={i:f,l:!1,exports:{}};return r[f].call(u.exports,u,u.exports,e),u.l=!0,u.exports}e.m=r,e.c=t,e.d=function(r,t,f){e.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:f})},e.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e.t=function(r,t){if(1&t&&(r=e(r)),8&t)return r;if(4&t&&"object"==typeof r&&r&&r.__esModule)return r;var f=Object.create(null);if(e.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var u in r)e.d(f,u,function(t){return r[t]}.bind(null,u));return f},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},e.p="",e(e.s=7)}([function(r,t,e){"use strict";r.exports=Object.freeze({EPSILON:1e-6,EPSILON2:1e-12,PI:Math.PI,HALF_PI:.5*Math.PI,TWO_PI:2*Math.PI,RAD2DEG:180/Math.PI,DEG2RAD:Math.PI/180,abs:Math.abs,sqrt:Math.sqrt,cos:Math.cos,acos:Math.acos,sin:Math.sin,tan:Math.tan,atan2:Math.atan2,log:Math.log,exp:Math.exp,pow:Math.pow})},function(r,t,e){"use strict";var f=r.exports=function(r,t){"number"==typeof r&&r>0&&r<f.PRIMITIVE_TYPE.NB_ELEMS?this._primitiveType=r:this._primitiveType=0,"number"==typeof t&&t>0&&t<f.INDEX_TYPE.NB_ELEMS?this._indexType=t:this._indexType=0,this._gl=null,this._pointCount=0,this._attribConfigList=null,this._attribVBOList=null,this._indexVBO=null};f.AttribConfig=function(){this.vboIdx=0,this.componentType=f.COMPONENT_TYPE.FLOAT,this.nbComponents=3,this.offset=0,this.stride=0,this.bNormalized=!1},f.PRIMITIVE_TYPE=Object.freeze({NO_PRIMITIVE:0,POINTS:1,LINES:2,LINE_STRIP:3,LINE_LOOP:4,TRIANGLES:5,TRIANGLE_STRIP:6,TRIANGLE_FAN:7,NB_ELEMS:8}),f.INDEX_TYPE=Object.freeze({NO_INDEX:0,UNSIGNED_SHORT:1,UNSIGNED_INT:2,NB_ELEMS:3}),f.COMPONENT_TYPE=Object.freeze({NO_COMPONENT:0,BYTE:1,UNSIGNED_BYTE:2,SHORT:3,UNSIGNED_SHORT:4,FLOAT:5,NB_ELEMS:6}),f.ATTRIB_TYPE=Object.freeze({VERTEX:0,TEX_COORDS:1,VERTEX_COLOR:2,NORMAL:3,BINORMAL:4,TANGENT:5,BONE_IDX:6,BONE_WEIGHT:7,USER_ATTRIB:8}),f.prototype._initAttribConfig=function(){},f.prototype._initVBO=function(){},f.prototype._createStaticVBO=function(r,t){if(this._gl&&!this._gl.isContextLost()&&r&&r.buffer instanceof ArrayBuffer){var e=this._gl.ARRAY_BUFFER;!0===t&&(e=this._gl.ELEMENT_ARRAY_BUFFER);var f=this._gl.createBuffer();if(f){this._gl.bindBuffer(e,f),this._gl.bufferData(e,r,this._gl.STATIC_DRAW),this._gl.bindBuffer(e,null);var u=this._gl.getError();return u!==this._gl.NO_ERROR?(u!==this._gl.CONTEXT_LOST_WEBGL&&(window.console.warn("cannot create static VBO (err: #"+u+")"),this._gl.deleteBuffer(f)),null):f}}return null},f.prototype.init=function(r,t){if(!(r instanceof WebGLRenderingContext)||r.isContextLost()||this._gl&&this._gl!==r)return!1;if(t)this._attribVBOList=null,this._indexVBO=null;else if(this._attribVBOList)return!0;if(!this._attribConfigList){if(this._gl=r,this._attribConfigList=[],this._initAttribConfig(),this._attribConfigList.length<=0||this._pointCount<=0)return this._gl=null,this._attribConfigList=null,this._pointCount=0,!1;this._indexType!==f.INDEX_TYPE.UNSIGNED_INT||this._gl._bExtendedIndexType||(this._indexType=f.INDEX_TYPE.UNSIGNED_SHORT,this._bHadExtendedIndexType=!0)}this._attribVBOList=[],this._initVBO();var e=this._attribVBOList.length;if(e<=0)return this._attribVBOList=null,this._indexVBO&&(this._gl.deleteBuffer(this._indexVBO),this._indexVBO=null),!1;if(this._indexType!==f.INDEX_TYPE.NO_INDEX&&!this._indexVBO){for(var u=0;u<e;++u)this._gl.deleteBuffer(this._attribVBOList[u]);return this._attribVBOList=null,!1}return!0},f.prototype.shut=function(){if(this._attribVBOList&&!this._gl.isContextLost()){for(var r=this._attribVBOList.length,t=0;t<r;++t)this._gl.deleteBuffer(this._attribVBOList[t]);this._indexVBO&&this._gl.deleteBuffer(this._indexVBO)}this._gl=null,this._pointCount=0,this._attribConfigList=null,this._attribVBOList=null,this._indexVBO=null,!0===this._bHadExtendedIndexType&&(this._indexType=f.INDEX_TYPE.UNSIGNED_INT,delete this._bHadExtendedIndexType)},f.prototype.isReady=function(r){return this._attribVBOList&&this._gl===r},f.prototype.getPrimitiveType=function(){return this._primitiveType},f.prototype.getIndexType=function(){return this._indexType},f.prototype.getIndexVBO=function(){return this._indexVBO},f.prototype.getPointCount=function(){return this._pointCount},f.prototype.bindAttribBuffer=function(r,t,e){if(this._attribVBOList&&"number"==typeof r&&r>=0&&"number"==typeof t&&t>=0&&t<this._attribConfigList.length){var u=this._attribConfigList[t];if(u instanceof Array){var n=u.length;if(n<=0)return!1;"number"==typeof e&&e>0?e>=n&&(e=n-1):e=0,u=u[e]}if(u instanceof f.AttribConfig&&u.vboIdx>=0&&u.vboIdx<this._attribVBOList.length){var i=this._attribVBOList[u.vboIdx];if(i){var o;switch(u.componentType){case f.COMPONENT_TYPE.BYTE:o=this._gl.BYTE;break;case f.COMPONENT_TYPE.UNSIGNED_BYTE:o=this._gl.UNSIGNED_BYTE;break;case f.COMPONENT_TYPE.SHORT:o=this._gl.SHORT;break;case f.COMPONENT_TYPE.UNSIGNED_SHORT:o=this._gl.UNSIGNED_SHORT;break;case f.COMPONENT_TYPE.FLOAT:o=this._gl.FLOAT;break;default:return!1}return this._gl.bindBuffer(this._gl.ARRAY_BUFFER,i),this._gl.vertexAttribPointer(r,u.nbComponents,o,u.bNormalized,u.stride,u.offset),!0}}}return!1}},function(r,t,e){"use strict";var f=e(0),u=e(3),n=r.exports=function(){this.buffer=new Float32Array(4),this.buffer[3]=1};n.prototype.setFromValues=function(r,t,e,f){return this.buffer[0]=r,this.buffer[1]=t,this.buffer[2]=e,this.buffer[3]=f,this},n.prototype.setFromArray=function(r){return this.buffer[0]=r[0],this.buffer[1]=r[1],this.buffer[2]=r[2],this.buffer[3]=r[3],this},n.prototype.setFromAxisAndAngle=function(r,t){return n.bufferSetFromAxisAndAngle(this.buffer,0,r.buffer,0,t),this},n.prototype.setFromRotationTo=function(r,t){return n.bufferSetFromRotationTo(this.buffer,0,r.buffer,0,t.buffer,0),this},n.prototype.setFromRotationMat3=function(r){return n.bufferSetFromRotationMat3(this.buffer,0,r.buffer,0),this},n.prototype.setFromRotationMat4=function(r){return n.bufferSetFromRotationMat4(this.buffer,0,r.buffer,0),this},n.prototype.setIdentity=function(){return this.buffer[0]=this.buffer[1]=this.buffer[2]=0,this.buffer[3]=1,this},n.prototype.copy=function(r){return this.buffer[0]=r.buffer[0],this.buffer[1]=r.buffer[1],this.buffer[2]=r.buffer[2],this.buffer[3]=r.buffer[3],this},n.prototype.getAxisAndAngle=function(r){return n.bufferGetAxisAndAngle(r.buffer,0,this.buffer,0)},n.prototype.isNull=function(){return n.bufferIsNull(this.buffer,0)},n.prototype.isIdentity=function(){return n.bufferIsIdentity(this.buffer,0)},n.prototype.equals=function(r){return n.bufferEquals(this.buffer,0,r.buffer,0)},n.prototype.fastRotationEquals=function(r){return n.bufferFastRotationEquals(this.buffer,0,r.buffer,0)},n.prototype.rotationEquals=function(r){return n.bufferRotationEquals(this.buffer,0,r.buffer,0)},n.prototype.scale=function(r,t){return n.bufferScale(this.buffer,0,r,t.buffer,0),this},n.prototype.scaleInPlace=function(r){return n.bufferScaleInPlace(this.buffer,0,r),this},n.prototype.negate=function(r){return n.bufferNegate(this.buffer,0,r.buffer,0),this},n.prototype.negateInPlace=function(){return n.bufferNegate(this.buffer,0,this.buffer,0),this},n.prototype.conjugate=function(r){return n.bufferConjugate(this.buffer,0,r.buffer,0),this},n.prototype.conjugateInPlace=function(){return n.bufferConjugate(this.buffer,0,this.buffer,0),this},n.prototype.multiply=function(r,t){return n.bufferMultiply(this.buffer,0,r.buffer,0,t.buffer,0),this},n.prototype.multiplyInPlace=function(r){return n.bufferMultiply(this.buffer,0,this.buffer,0,r.buffer,0),this},n.prototype.invert=function(r){return n.bufferInvert(this.buffer,0,r.buffer,0),this},n.prototype.invertInPlace=function(){return n.bufferInvert(this.buffer,0,this.buffer,0),this},n.prototype.squareNorm=function(){return n.bufferSquareNorm(this.buffer,0)},n.prototype.norm=function(){return n.bufferNorm(this.buffer,0)},n.prototype.normalize=function(r){return n.bufferNormalize(this.buffer,0,r.buffer,0),this},n.prototype.normalizeInPlace=function(){return n.bufferNormalize(this.buffer,0,this.buffer,0),this},n.prototype.dotProduct=function(r){return n.bufferDotProduct(this.buffer,0,r.buffer,0)},n.prototype.log=function(r){return n.bufferLog(this.buffer,0,r.buffer,0),this},n.prototype.logInPlace=function(){return n.bufferLog(this.buffer,0,this.buffer,0),this},n.prototype.exp=function(r){return n.bufferExp(this.buffer,0,r.buffer,0),this},n.prototype.expInPlace=function(){return n.bufferExp(this.buffer,0,this.buffer,0),this},n.prototype.pow=function(r,t){return n.bufferPow(this.buffer,0,r.buffer,0,t),this},n.prototype.powInPlace=function(r){return n.bufferPow(this.buffer,0,this.buffer,0,r),this},n.prototype.transformVec3=function(r,t){return n.bufferTransformVec3(r.buffer,0,this.buffer,0,t.buffer,0),r},n.prototype.transformVec3InPlace=function(r){return n.bufferTransformVec3(r.buffer,0,this.buffer,0,r.buffer,0),r},n.prototype.lerp=function(r,t,e){return n.bufferLerp(this.buffer,0,r.buffer,0,t,e.buffer,0),this},n.prototype.slerp=function(r,t,e){return n.bufferSlerp(this.buffer,0,r.buffer,0,t,e.buffer,0),this},n.prototype.squad=function(r,t,e,f,u){return n.bufferSquad(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0,u.buffer,0),this},n.prototype.computeSquadIntermediate=function(r,t,e){return n.bufferComputeSquadIntermediate(this.buffer,0,r.buffer,0,t.buffer,0,e.buffer,0),this},n.NB_COMPONENTS=4,n.IDENTITY=new n,n.createBuffer=function(r){r*=4;for(var t=new Float32Array(r),e=3;e<r;e+=4)t[e]=1;return t},n.bufferIsNull=u.bufferIsNull,n.bufferEquals=u.bufferEquals,n.bufferScale=u.bufferScale,n.bufferScaleInPlace=u.bufferScaleInPlace,n.bufferNegate=u.bufferNegate,n.bufferSquareNorm=u.bufferSquareNorm,n.bufferNorm=u.bufferNorm,n.bufferNormalize=u.bufferNormalize,n.bufferDotProduct=u.bufferDotProduct,n.bufferLerp=u.bufferLinear,n.bufferSetFromAxisAndAngle=function(r,t,e,u,n){var i=e[u],o=e[u+1],s=e[u+2],b=i*i+o*o+s*s;return b<f.EPSILON2?(r[t]=r[t+1]=r[t+2]=0,r[t+3]=1,r):(n*=.5,b=f.sin(n)/f.sqrt(b),r[t]=i*b,r[t+1]=o*b,r[t+2]=s*b,r[t+3]=f.cos(n),r)},n.bufferSetFromRotationTo=function(r,t,e,u,n,i){var o=e[u],s=e[u+1],b=e[u+2],a=o*o+s*s+b*b;if(a<f.EPSILON2)return r[t]=r[t+1]=r[t+2]=0,r[t+3]=1,r;var h=n[i],c=n[i+1],l=n[i+2],p=h*h+c*c+l*l;if(p<f.EPSILON2)return r[t]=r[t+1]=r[t+2]=0,r[t+3]=1,r;s*=a=1/f.sqrt(a),b*=a;var I=(o*=a)*(h*=p=1/f.sqrt(p))+s*(c*=p)+b*(l*=p),_=0,S=0,E=0;return I>1-f.EPSILON?(r[t]=r[t+1]=r[t+2]=0,r[t+3]=1,r):I<f.EPSILON-1?((a=(S=-b)*S+(E=s)*E)<f.EPSILON2&&(S=0,a=(_=b)*_+(E=-o)*E),a=1/f.sqrt(a),r[t]=_*a,r[t+1]=S*a,r[t+2]=E*a,r[t+3]=0,r):(_=s*l-b*c,S=b*h-o*l,E=o*c-s*h,I+=1,a=1/f.sqrt(_*_+S*S+E*E+I*I),r[t]=_*a,r[t+1]=S*a,r[t+2]=E*a,r[t+3]=I*a,r)},n.bufferSetFromRotationMat3=function(r,t,e,u){var i=e[u]+e[u+4]+e[u+8],o=0;if(i>0)o=f.sqrt(i+1),r[t+3]=.5*o,o=.5/o,r[t]=(e[u+5]-e[u+7])*o,r[t+1]=(e[u+6]-e[u+2])*o,r[t+2]=(e[u+1]-e[u+3])*o;else{var s=0;e[u+4]>e[u]&&(s=1),e[u+8]>e[u+4*s]&&(s=2);var b=(s+1)%3,a=(s+2)%3;o=f.sqrt(e[u+4*s]-e[u+4*b]-e[u+4*a]+1),r[t+s]=.5*o,o=.5/o,r[t+3]=(e[u+3*b+a]-e[u+3*a+b])*o,r[t+b]=(e[u+3*b+s]+e[u+3*s+b])*o,r[t+a]=(e[u+3*a+s]+e[u+3*s+a])*o}return n.bufferNormalize(r,t,r,t)},n.bufferSetFromRotationMat4=function(r,t,e,u){var i=e[u]+e[u+5]+e[u+10],o=0;if(i>0)o=f.sqrt(i+1),r[t+3]=.5*o,o=.5/o,r[t]=(e[u+6]-e[u+9])*o,r[t+1]=(e[u+8]-e[u+2])*o,r[t+2]=(e[u+1]-e[u+4])*o;else{var s=0;e[u+5]>e[u]&&(s=1),e[u+10]>e[u+5*s]&&(s=2);var b=(s+1)%3,a=(s+2)%3;o=f.sqrt(e[u+5*s]-e[u+5*b]-e[u+5*a]+1),r[t+s]=.5*o,o=.5/o,r[t+3]=(e[u+4*b+a]-e[u+4*a+b])*o,r[t+b]=(e[u+4*b+s]+e[u+4*s+b])*o,r[t+a]=(e[u+4*a+s]+e[u+4*s+a])*o}return n.bufferNormalize(r,t,r,t)},n.bufferGetAxisAndAngle=function(r,t,e,u){var n=e[u],i=e[u+1],o=e[u+2],s=e[u+3],b=n*n+i*i+o*o;if(b<f.EPSILON2)return f.abs(s)<f.EPSILON?(r[t]=r[t+1]=r[t+2]=0,0):(r[t]=1,r[t+1]=r[t+2]=0,s>0?0:f.TWO_PI);b=f.sqrt(b);var a=f.atan2(b,s);return b=1/b,r[t]=n*b,r[t+1]=i*b,r[t+2]=o*b,2*a},n.bufferIsIdentity=function(r,t){return f.abs(r[t])<f.EPSILON&&f.abs(r[t+1])<f.EPSILON&&f.abs(r[t+2])<f.EPSILON&&f.abs(r[t+3]-1)<f.EPSILON},n.bufferFastRotationEquals=function(r,t,e,u){var n=r[t],i=r[t+1],o=r[t+2],s=r[t+3];if(r===e&&t===u)return!(f.abs(n)<f.EPSILON&&f.abs(i)<f.EPSILON&&f.abs(o)<f.EPSILON&&f.abs(s)<f.EPSILON);var b=e[u],a=e[u+1],h=e[u+2],c=e[u+3];return(f.abs(n)>=f.EPSILON||f.abs(i)>=f.EPSILON||f.abs(o)>=f.EPSILON||f.abs(s)>=f.EPSILON)&&(f.abs(b)>=f.EPSILON||f.abs(a)>=f.EPSILON||f.abs(h)>=f.EPSILON||f.abs(c)>=f.EPSILON)&&(f.abs(b-n)<f.EPSILON&&f.abs(a-i)<f.EPSILON&&f.abs(h-o)<f.EPSILON&&f.abs(c-s)<f.EPSILON||f.abs(b+n)<f.EPSILON&&f.abs(a+i)<f.EPSILON&&f.abs(h+o)<f.EPSILON&&f.abs(c+s)<f.EPSILON)},n.bufferRotationEquals=function(r,t,e,u){var n=r[t],i=r[t+1],o=r[t+2],s=r[t+3];if(r===e&&t===u)return!(f.abs(n)<f.EPSILON&&f.abs(i)<f.EPSILON&&f.abs(o)<f.EPSILON&&f.abs(s)<f.EPSILON);var b=n*n+i*i+o*o+s*s;if(b<f.EPSILON2)return!1;var a=e[u],h=e[u+1],c=e[u+2],l=e[u+3],p=a*a+h*h+c*c+l*l;if(p<f.EPSILON2)return!1;var I=f.abs(n*a+i*h+o*c+s*l);return!(I<f.EPSILON)&&!((I/=f.sqrt(b*p))<=1-f.EPSILON)},n.bufferConjugate=function(r,t,e,f){return r[t]=-e[f],r[t+1]=-e[f+1],r[t+2]=-e[f+2],r[t+3]=e[f+3],r},n.bufferMultiply=function(r,t,e,f,u,n){var i=e[f],o=e[f+1],s=e[f+2],b=e[f+3],a=u[n],h=u[n+1],c=u[n+2],l=u[n+3];return r[t]=b*a+l*i+o*c-h*s,r[t+1]=b*h+l*o+s*a-c*i,r[t+2]=b*c+l*s+i*h-a*o,r[t+3]=b*l-i*a-o*h-s*c,r},n.bufferInvert=function(r,t,e,u){var n=e[u],i=e[u+1],o=e[u+2],s=e[u+3],b=n*n+i*i+o*o+s*s;return b<f.EPSILON2?(r[t]=r[t+1]=r[t+2]=0,r[t+3]=s>=0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY,r):(b=1/b,r[t]=-n*b,r[t+1]=-i*b,r[t+2]=-o*b,r[t+3]=s*b,r)},n.bufferLog=function(r,t,e,u){var n=e[u],i=e[u+1],o=e[u+2],s=e[u+3],b=n*n+i*i+o*o;if(b<f.EPSILON2)return s>0?(r[t]=r[t+1]=r[t+2]=0,r[t+3]=f.log(s)):s<0?(r[t]=f.PI,r[t+1]=r[t+2]=0,r[t+3]=f.log(-s)):(r[t]=r[t+1]=r[t+2]=0,r[t+3]=Number.NEGATIVE_INFINITY),r;var a=b+s*s;b=f.sqrt(b);var h=f.atan2(b,s);return h/=b,r[t]=n*h,r[t+1]=i*h,r[t+2]=o*h,r[t+3]=.5*f.log(a),r},n.bufferExp=function(r,t,e,u){var n=e[u],i=e[u+1],o=e[u+2],s=f.exp(e[u+3]),b=n*n+i*i+o*o;return b<f.EPSILON2?(r[t]=r[t+1]=r[t+2]=0,r[t+3]=s,r):(b=f.sqrt(b),r[t+3]=s*f.cos(b),b=s*f.sin(b)/b,r[t]=n*b,r[t+1]=i*b,r[t+2]=o*b,r)},n.bufferPow=function(r,t,e,u,n){if(f.abs(n)<f.EPSILON)return r[t]=r[t+1]=r[t+2]=0,r[t+3]=1,r;if(f.abs(n-1)<f.EPSILON2)return r[t]=e[u],r[t+1]=e[u+1],r[t+2]=e[u+2],r[t+3]=e[u+3],r;var i=e[u],o=e[u+1],s=e[u+2],b=e[u+3],a=i*i+o*o+s*s;if(a<f.EPSILON2)return r[t]=r[t+1]=r[t+2]=0,f.abs(b)<f.EPSILON?r[t+3]=0:r[t+3]=f.pow(b,n),r;var h=f.pow(a+b*b,.5*n);a=f.sqrt(a);var c=f.atan2(a,b);return c*=n,r[t+3]=h*f.cos(c),c=h*f.sin(c)/a,r[t]=i*c,r[t+1]=o*c,r[t+2]=s*c,r},n.bufferTransformVec3=function(r,t,e,f,u,n){var i=u[n],o=u[n+1],s=u[n+2],b=e[f],a=e[f+1],h=e[f+2],c=e[f+3],l=c*i-o*h+a*s,p=c*o-s*b+h*i,I=c*s-i*a+b*o,_=i*b+o*a+s*h;return r[t]=c*l+_*b+a*I-p*h,r[t+1]=c*p+_*a+h*l-I*b,r[t+2]=c*I+_*h+b*p-l*a,r},n.bufferSlerp=function(r,t,e,u,n,i,o){var s=e[u],b=e[u+1],a=e[u+2],h=e[u+3],c=i[o],l=i[o+1],p=i[o+2],I=i[o+3],_=s*c+b*l+a*p+h*I;if(_<0&&(_=-_,c=-c,l=-l,p=-p,I=-I),_>1-f.EPSILON)return r[t]=s+n*(c-s),r[t+1]=b+n*(l-b),r[t+2]=a+n*(p-a),r[t+3]=h+n*(I-h),r;_=f.acos(_);var S=1/f.sin(_),E=f.sin((1-n)*_)*S;return n=f.sin(n*_)*S,r[t]=E*s+n*c,r[t+1]=E*b+n*l,r[t+2]=E*a+n*p,r[t+3]=E*h+n*I,r};var i=new Float32Array(8);n.bufferSquad=function(r,t,e,f,u,o,s,b,a,h,c){return n.bufferSlerp(i,0,e,f,s,h,c),n.bufferSlerp(r,t,u,o,s,b,a),n.bufferSlerp(r,t,r,t,2*s*(1-s),i,0),r},n.bufferComputeSquadIntermediate=function(r,t,e,f,u,o,s,b){return n.bufferInvert(i,4,u,o),n.bufferMultiply(i,0,s,b,i,4),n.bufferLog(i,0,i,0),n.bufferMultiply(i,4,e,f,i,4),n.bufferLog(i,4,i,4),i[0]=-.25*(i[0]+i[4]),i[1]=-.25*(i[1]+i[5]),i[2]=-.25*(i[2]+i[6]),i[3]=-.25*(i[3]+i[7]),n.bufferExp(i,0,i,0),n.bufferMultiply(r,t,i,0,u,o),n.bufferNormalize(r,t,r,t),r}},function(r,t,e){"use strict";var f=e(0),u=r.exports=function(){this.buffer=new Float32Array(4)};u.prototype.setFromValues=function(r,t,e,f){return this.buffer[0]=r,this.buffer[1]=t,this.buffer[2]=e,this.buffer[3]=f,this},u.prototype.setFromArray=function(r){return this.buffer[0]=r[0],this.buffer[1]=r[1],this.buffer[2]=r[2],this.buffer[3]=r[3],this},u.prototype.setFromVec3Pos=function(r){return this.buffer[0]=r.buffer[0],this.buffer[1]=r.buffer[1],this.buffer[2]=r.buffer[2],this.buffer[3]=1,this},u.prototype.setFromVec3Dir=function(r){return this.buffer[0]=r.buffer[0],this.buffer[1]=r.buffer[1],this.buffer[2]=r.buffer[2],this.buffer[3]=0,this},u.prototype.setNull=function(){return this.buffer[0]=this.buffer[1]=this.buffer[2]=this.buffer[3]=0,this},u.prototype.setOne=function(){return this.buffer[0]=this.buffer[1]=this.buffer[2]=this.buffer[3]=1,this},u.prototype.copy=function(r){return this.buffer[0]=r.buffer[0],this.buffer[1]=r.buffer[1],this.buffer[2]=r.buffer[2],this.buffer[3]=r.buffer[3],this},u.prototype.isNull=function(){return u.bufferIsNull(this.buffer,0)},u.prototype.equals=function(r){return u.bufferEquals(this.buffer,0,r.buffer,0)},u.prototype.add=function(r,t){return u.bufferAdd(this.buffer,0,r.buffer,0,t.buffer,0),this},u.prototype.addInPlace=function(r){return u.bufferAddInPlace(this.buffer,0,r.buffer,0),this},u.prototype.substract=function(r,t){return u.bufferSubstract(this.buffer,0,r.buffer,0,t.buffer,0),this},u.prototype.substractInPlace=function(r){return u.bufferSubstractInPlace(this.buffer,0,r.buffer,0),this},u.prototype.scale=function(r,t){return u.bufferScale(this.buffer,0,r,t.buffer,0),this},u.prototype.scaleInPlace=function(r){return u.bufferScaleInPlace(this.buffer,0,r),this},u.prototype.addScaled=function(r,t,e){return u.bufferAddScaled(this.buffer,0,r.buffer,0,t,e.buffer,0),this},u.prototype.addScaledInPlace=function(r,t){return u.bufferAddScaledInPlace(this.buffer,0,r,t.buffer,0),this},u.prototype.negate=function(r){return u.bufferNegate(this.buffer,0,r.buffer,0),this},u.prototype.negateInPlace=function(){return u.bufferNegate(this.buffer,0,this.buffer,0),this},u.prototype.squareDistance=function(r){return u.bufferSquareDistance(this.buffer,0,r.buffer,0)},u.prototype.distance=function(r){return u.bufferDistance(this.buffer,0,r.buffer,0)},u.prototype.squareNorm=function(){return u.bufferSquareNorm(this.buffer,0)},u.prototype.norm=function(){return u.bufferNorm(this.buffer,0)},u.prototype.normalize=function(r){return u.bufferNormalize(this.buffer,0,r.buffer,0),this},u.prototype.normalizeInPlace=function(){return u.bufferNormalize(this.buffer,0,this.buffer,0),this},u.prototype.dotProduct=function(r){return u.bufferDotProduct(this.buffer,0,r.buffer,0)},u.prototype.linear=function(r,t,e){return u.bufferLinear(this.buffer,0,r.buffer,0,t,e.buffer,0),this},u.prototype.quadratic=function(r,t,e,f){return u.bufferQuadratic(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0),this},u.prototype.hermite=function(r,t,e,f,n){return u.bufferHermite(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0,n.buffer,0),this},u.prototype.bezier=function(r,t,e,f,n){return u.bufferBezier(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0,n.buffer,0),this},u.prototype.catmullRom=function(r,t,e,f,n){return u.bufferCatmullRom(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0,n.buffer,0),this},u.NB_COMPONENTS=4,u.I=(new u).setFromValues(1,0,0,0),u.J=(new u).setFromValues(0,1,0,0),u.K=(new u).setFromValues(0,0,1,0),u.L=(new u).setFromValues(0,0,0,1),u.createBuffer=function(r){return new Float32Array(4*r)},u.bufferIsNull=function(r,t){return f.abs(r[t])<f.EPSILON&&f.abs(r[t+1])<f.EPSILON&&f.abs(r[t+2])<f.EPSILON&&f.abs(r[t+3])<f.EPSILON},u.bufferEquals=function(r,t,e,u){return r===e&&t===u||f.abs(e[u]-r[t])<f.EPSILON&&f.abs(e[u+1]-r[t+1])<f.EPSILON&&f.abs(e[u+2]-r[t+2])<f.EPSILON&&f.abs(e[u+3]-r[t+3])<f.EPSILON},u.bufferAdd=function(r,t,e,f,u,n){return r[t]=e[f]+u[n],r[t+1]=e[f+1]+u[n+1],r[t+2]=e[f+2]+u[n+2],r[t+3]=e[f+3]+u[n+3],r},u.bufferAddInPlace=function(r,t,e,f){return r[t]+=e[f],r[t+1]+=e[f+1],r[t+2]+=e[f+2],r[t+3]+=e[f+3],r},u.bufferSubstract=function(r,t,e,f,u,n){return r[t]=e[f]-u[n],r[t+1]=e[f+1]-u[n+1],r[t+2]=e[f+2]-u[n+2],r[t+3]=e[f+3]-u[n+3],r},u.bufferSubstractInPlace=function(r,t,e,f){return r[t]-=e[f],r[t+1]-=e[f+1],r[t+2]-=e[f+2],r[t+3]-=e[f+3],r},u.bufferScale=function(r,t,e,f,u){return r[t]=e*f[u],r[t+1]=e*f[u+1],r[t+2]=e*f[u+2],r[t+3]=e*f[u+3],r},u.bufferScaleInPlace=function(r,t,e){return r[t]*=e,r[t+1]*=e,r[t+2]*=e,r[t+3]*=e,r},u.bufferAddScaled=function(r,t,e,f,u,n,i){return r[t]=e[f]+u*n[i],r[t+1]=e[f+1]+u*n[i+1],r[t+2]=e[f+2]+u*n[i+2],r[t+3]=e[f+3]+u*n[i+3],r},u.bufferAddScaledInPlace=function(r,t,e,f,u){return r[t]+=e*f[u],r[t+1]+=e*f[u+1],r[t+2]+=e*f[u+2],r[t+3]+=e*f[u+3],r},u.bufferNegate=function(r,t,e,f){return r[t]=-e[f],r[t+1]=-e[f+1],r[t+2]=-e[f+2],r[t+3]=-e[f+3],r},u.bufferSquareDistance=function(r,t,e,f){var u=e[f]-r[t],n=e[f+1]-r[t+1],i=e[f+2]-r[t+2],o=e[f+3]-r[t+3];return u*u+n*n+i*i+o*o},u.bufferDistance=function(r,t,e,u){var n=e[u]-r[t],i=e[u+1]-r[t+1],o=e[u+2]-r[t+2],s=e[u+3]-r[t+3];return f.sqrt(n*n+i*i+o*o+s*s)},u.bufferSquareNorm=function(r,t){var e=r[t],f=r[t+1],u=r[t+2],n=r[t+3];return e*e+f*f+u*u+n*n},u.bufferNorm=function(r,t){var e=r[t],u=r[t+1],n=r[t+2],i=r[t+3];return f.sqrt(e*e+u*u+n*n+i*i)},u.bufferNormalize=function(r,t,e,u){var n=e[u],i=e[u+1],o=e[u+2],s=e[u+3],b=n*n+i*i+o*o+s*s;return b<f.EPSILON2?(r[t]=r[t+1]=r[t+2]=r[t+3]=0,r):(b=1/f.sqrt(b),r[t]=n*b,r[t+1]=i*b,r[t+2]=o*b,r[t+3]=s*b,r)},u.bufferDotProduct=function(r,t,e,f){return r[t]*e[f]+r[t+1]*e[f+1]+r[t+2]*e[f+2]+r[t+3]*e[f+3]},u.bufferLinear=function(r,t,e,f,u,n,i){var o=e[f],s=e[f+1],b=e[f+2],a=e[f+3];return r[t]=o+u*(n[i]-o),r[t+1]=s+u*(n[i+1]-s),r[t+2]=b+u*(n[i+2]-b),r[t+3]=a+u*(n[i+3]-a),r},u.bufferQuadratic=function(r,t,e,f,u,n,i,o,s){var b=.5*(i-1)*i,a=1-i*i,h=.5*(i+1)*i;return r[t]=b*e[f]+a*u[n]+h*o[s],r[t+1]=b*e[f+1]+a*u[n+1]+h*o[s+1],r[t+2]=b*e[f+2]+a*u[n+2]+h*o[s+2],r[t+3]=b*e[f+3]+a*u[n+3]+h*o[s+3],r},u.bufferHermite=function(r,t,e,f,u,n,i,o,s,b,a){var h=i*i,c=h*(i-2)+i,l=h*(2*i-3)+1,p=h*(3-2*i),I=h*(i-1);return r[t]=c*e[f]+l*u[n]+p*o[s]+I*b[a],r[t+1]=c*e[f+1]+l*u[n+1]+p*o[s+1]+I*b[a+1],r[t+2]=c*e[f+2]+l*u[n+2]+p*o[s+2]+I*b[a+2],r[t+3]=c*e[f+3]+l*u[n+3]+p*o[s+3]+I*b[a+3],r},u.bufferBezier=function(r,t,e,f,u,n,i,o,s,b,a){var h=i*i,c=1-i,l=c*c,p=3*l*i,I=l*c,_=h*i,S=3*c*h;return r[t]=p*e[f]+I*u[n]+_*o[s]+S*b[a],r[t+1]=p*e[f+1]+I*u[n+1]+_*o[s+1]+S*b[a+1],r[t+2]=p*e[f+2]+I*u[n+2]+_*o[s+2]+S*b[a+2],r[t+3]=p*e[f+3]+I*u[n+3]+_*o[s+3]+S*b[a+3],r},u.bufferCatmullRom=function(r,t,e,f,u,n,i,o,s,b,a){var h=i*i,c=-.5*i,l=c*(h+1)+h,p=c*(5*i-3*h)+1,I=c*(3*h-4*i-1),_=c*(i-h);return r[t]=l*e[f]+p*u[n]+I*o[s]+_*b[a],r[t+1]=l*e[f+1]+p*u[n+1]+I*o[s+1]+_*b[a+1],r[t+2]=l*e[f+2]+p*u[n+2]+I*o[s+2]+_*b[a+2],r[t+3]=l*e[f+3]+p*u[n+3]+I*o[s+3]+_*b[a+3],r}},function(r,t,e){"use strict";var f=e(0),u=r.exports=function(){this.buffer=new Float32Array(4),this.buffer[0]=this.buffer[3]=1};u.prototype.setFromArray=function(r){return this.buffer[0]=r[0],this.buffer[1]=r[1],this.buffer[2]=r[2],this.buffer[3]=r[3],this},u.prototype.setColumnVec2=function(r,t){var e=2*r,f=t.buffer;return this.buffer[e]=f[0],this.buffer[e+1]=f[1],this},u.prototype.setFromColumnsVec2=function(r,t){var e=r.buffer;return this.buffer[0]=e[0],this.buffer[1]=e[1],e=t.buffer,this.buffer[2]=e[0],this.buffer[3]=e[1],this},u.prototype.setFromRotAngle=function(r){return u.bufferSetFromRotAngle(this.buffer,0,r),this},u.prototype.setFromMat3RotScale=function(r){return u.bufferSetFromMat3RotScale(this.buffer,0,r.buffer,0),this},u.prototype.setFromRSTransfo=function(r,t){return u.bufferSetFromRSTransfo(this.buffer,0,r,t.buffer,0),this},u.prototype.setIdentity=function(){return this.buffer[0]=this.buffer[3]=1,this.buffer[1]=this.buffer[2]=0,this},u.prototype.copy=function(r){var t=r.buffer;return this.buffer[0]=t[0],this.buffer[1]=t[1],this.buffer[2]=t[2],this.buffer[3]=t[3],this},u.prototype.getRSTransfo=function(r){return u.bufferGetRSTransfo(r.buffer,0,this.buffer,0)},u.prototype.normalizeRSTransfo=function(r){return u.bufferNormalizeRSTransfo(this.buffer,0,r.buffer,0),this},u.prototype.normalizeRSTransfoInPlace=function(){return u.bufferNormalizeRSTransfo(this.buffer,0,this.buffer,0),this},u.prototype.isIdentity=function(){return u.bufferIsIdentity(this.buffer,0)},u.prototype.equals=function(r){return u.bufferEquals(this.buffer,0,r.buffer,0)},u.prototype.multiply=function(r,t){return u.bufferMultiply(this.buffer,0,r.buffer,0,t.buffer,0),this},u.prototype.multiplyInPlace=function(r){return u.bufferMultiply(this.buffer,0,this.buffer,0,r.buffer,0),this},u.prototype.invert=function(r){return u.bufferInvert(this.buffer,0,r.buffer,0),this},u.prototype.invertInPlace=function(){return u.bufferInvert(this.buffer,0,this.buffer,0),this},u.prototype.transpose=function(r){return u.bufferTranspose(this.buffer,0,r.buffer,0),this},u.prototype.transposeInPlace=function(){return u.bufferTranspose(this.buffer,0,this.buffer,0),this},u.prototype.transformVec2=function(r,t){return u.bufferTransformVec2(r.buffer,0,this.buffer,0,t.buffer,0),r},u.prototype.transformVec2InPlace=function(r){return u.bufferTransformVec2(r.buffer,0,this.buffer,0,r.buffer,0),r},u.NB_COMPONENTS=4,u.IDENTITY=new u,u.createBuffer=function(r){r*=4;for(var t=new Float32Array(r),e=0;e<r;e+=4)t[e]=t[e+3]=1;return t},u.bufferSetFromRotAngle=function(r,t,e){var u=f.cos(e),n=f.sin(e);return r[t]=u,r[t+1]=n,r[t+2]=-n,r[t+3]=u,r},u.bufferSetFromMat3RotScale=function(r,t,e,f){return r[t]=e[f],r[t+1]=e[f+1],r[t+2]=e[f+3],r[t+3]=e[f+4],r},u.bufferSetFromRSTransfo=function(r,t,e,u,n){var i=f.cos(e),o=f.sin(e),s=u[n],b=u[n+1];return r[t]=i*s,r[t+1]=o*s,r[t+2]=-o*b,r[t+3]=i*b,r};var n=new Float32Array(6);u._orthoNormalizeTransfo=function(r,t,e){var u=r[t],i=r[t+1],o=u*u+i*i;o<f.EPSILON2?n[4]=u=i=0:(n[4]=o=f.sqrt(o),u*=o=1/o,i*=o);var s=r[t+=e],b=r[t+1];return(o=(s-=(o=s*u+b*i)*u)*s+(b-=o*i)*b)<f.EPSILON2?n[5]=s=b=0:(n[5]=o=f.sqrt(o),s*=o=1/o,b*=o),n[0]=u,n[1]=i,n[2]=s,n[3]=b,n},u.bufferGetRSTransfo=function(r,t,e,n){var i=u._orthoNormalizeTransfo(e,n,2);return r[t]=i[4],r[t+1]=i[5],f.atan2(i[1],i[0])},u.bufferNormalizeRSTransfo=function(r,t,e,f){var n=u._orthoNormalizeTransfo(e,f,2),i=n[4],o=n[5];return r[t]=n[0]*i,r[t+1]=n[1]*i,r[t+2]=n[2]*o,r[t+3]=n[3]*o,r},u.bufferIsIdentity=function(r,t){return f.abs(r[t]-1)<f.EPSILON&&f.abs(r[t+1])<f.EPSILON&&f.abs(r[t+2])<f.EPSILON&&f.abs(r[t+3]-1)<f.EPSILON},u.bufferEquals=function(r,t,e,u){return r===e&&t===u||f.abs(e[u]-r[t])<f.EPSILON&&f.abs(e[u+1]-r[t+1])<f.EPSILON&&f.abs(e[u+2]-r[t+2])<f.EPSILON&&f.abs(e[u+3]-r[t+3])<f.EPSILON},u.bufferMultiply=function(r,t,e,f,u,n){var i=e[f],o=e[f+1],s=e[f+2],b=e[f+3],a=u[n],h=u[n+1];return r[t]=a*i+h*s,r[t+1]=a*o+h*b,a=u[n+2],h=u[n+3],r[t+2]=a*i+h*s,r[t+3]=a*o+h*b,r},u.bufferInvert=function(r,t,e,u){var n=e[u],i=e[u+1],o=e[u+2],s=e[u+3],b=n*s-o*i;return f.abs(b)<f.EPSILON?(r[t]=r[t+1]=r[t+2]=r[t+3]=b>=0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY,r):(b=1/b,r[t]=s*b,r[t+1]=-i*b,r[t+2]=-o*b,r[t+3]=n*b,r)},u.bufferTranspose=function(r,t,e,f){var u=e[f+1];return r[t]=e[f],r[t+1]=e[f+2],r[t+2]=u,r[t+3]=e[f+3],r},u.bufferTransformVec2=function(r,t,e,f,u,n){var i=u[n],o=u[n+1];return r[t]=i*e[f]+o*e[f+2],r[t+1]=i*e[f+1]+o*e[f+3],r}},function(r,t,e){"use strict";var f=e(0),u=e(2),n=e(4),i=r.exports=function(){this.buffer=new Float32Array(9),this.buffer[0]=this.buffer[4]=this.buffer[8]=1};i.prototype.setFromArray=function(r){return this.buffer[0]=r[0],this.buffer[1]=r[1],this.buffer[2]=r[2],this.buffer[3]=r[3],this.buffer[4]=r[4],this.buffer[5]=r[5],this.buffer[6]=r[6],this.buffer[7]=r[7],this.buffer[8]=r[8],this},i.prototype.setColumnVec3=function(r,t){var e=3*r,f=t.buffer;return this.buffer[e]=f[0],this.buffer[e+1]=f[1],this.buffer[e+2]=f[2],this},i.prototype.setFromColumnsVec3=function(r,t,e){var f=r.buffer;return this.buffer[0]=f[0],this.buffer[1]=f[1],this.buffer[2]=f[2],f=t.buffer,this.buffer[3]=f[0],this.buffer[4]=f[1],this.buffer[5]=f[2],f=e.buffer,this.buffer[6]=f[0],this.buffer[7]=f[1],this.buffer[8]=f[2],this},i.prototype.setColumnVec2=function(r,t){var e=3*r,f=t.buffer;return this.buffer[e]=f[0],this.buffer[e+1]=f[1],this.buffer[e+2]=2===r?1:0,this},i.prototype.setFromColumnsVec2=function(r,t,e){var f=r.buffer;return this.buffer[0]=f[0],this.buffer[1]=f[1],this.buffer[2]=0,f=t.buffer,this.buffer[3]=f[0],this.buffer[4]=f[1],this.buffer[5]=0,f=e.buffer,this.buffer[6]=f[0],this.buffer[7]=f[1],this.buffer[8]=1,this},i.prototype.setFromQuat=function(r){return i.bufferSetFromQuat(this.buffer,0,r.buffer,0),this},i.prototype.setFromMat4RotScale=function(r){return i.bufferSetFromMat4RotScale(this.buffer,0,r.buffer,0),this},i.prototype.setFromRSTransfo3D=function(r,t){return i.bufferSetFromRSTransfo3D(this.buffer,0,r.buffer,0,t.buffer,0),this},i.prototype.setRotation2D=function(r){return i.bufferSetRotation2D(this.buffer,0,r),this},i.prototype.setRotScale2DFromMat2=function(r){return i.bufferSetRotScale2DFromMat2(this.buffer,0,r.buffer,0),this},i.prototype.setFromTRSTransfo2D=function(r,t,e){return i.bufferSetFromTRSTransfo2D(this.buffer,0,r.buffer,0,t,e.buffer,0),this},i.prototype.setIdentity=function(){return this.buffer[0]=this.buffer[4]=this.buffer[8]=1,this.buffer[1]=this.buffer[2]=this.buffer[3]=this.buffer[5]=this.buffer[6]=this.buffer[7]=0,this},i.prototype.copy=function(r){var t=r.buffer;return this.buffer[0]=t[0],this.buffer[1]=t[1],this.buffer[2]=t[2],this.buffer[3]=t[3],this.buffer[4]=t[4],this.buffer[5]=t[5],this.buffer[6]=t[6],this.buffer[7]=t[7],this.buffer[8]=t[8],this},i.prototype.getRSTransfo3D=function(r,t){return i.bufferGetRSTransfo3D(r.buffer,0,t.buffer,0,this.buffer,0),this},i.prototype.normalizeRSTransfo3D=function(r){return i.bufferNormalizeRSTransfo3D(this.buffer,0,r.buffer,0),this},i.prototype.normalizeRSTransfo3DInPlace=function(){return i.bufferNormalizeRSTransfo3D(this.buffer,0,this.buffer,0),this},i.prototype.getTRSTransfo2D=function(r,t){return i.bufferGetTRSTransfo2D(r.buffer,0,t.buffer,0,this.buffer,0)},i.prototype.normalizeTRSTransfo2D=function(r){return i.bufferNormalizeTRSTransfo2D(this.buffer,0,r.buffer,0),this},i.prototype.normalizeTRSTransfo2DInPlace=function(){return i.bufferNormalizeTRSTransfo2D(this.buffer,0,this.buffer,0),this},i.prototype.isIdentity=function(){return i.bufferIsIdentity(this.buffer,0)},i.prototype.equals=function(r){return i.bufferEquals(this.buffer,0,r.buffer,0)},i.prototype.multiply=function(r,t){return i.bufferMultiply(this.buffer,0,r.buffer,0,t.buffer,0),this},i.prototype.multiplyInPlace=function(r){return i.bufferMultiply(this.buffer,0,this.buffer,0,r.buffer,0),this},i.prototype.invert=function(r){return i.bufferInvert(this.buffer,0,r.buffer,0),this},i.prototype.invertInPlace=function(){return i.bufferInvert(this.buffer,0,this.buffer,0),this},i.prototype.transpose=function(r){return i.bufferTranspose(this.buffer,0,r.buffer,0),this},i.prototype.transposeInPlace=function(){return i.bufferTranspose(this.buffer,0,this.buffer,0),this},i.prototype.transformVec3=function(r,t){return i.bufferTransformVec3(r.buffer,0,this.buffer,0,t.buffer,0),r},i.prototype.transformVec3InPlace=function(r){return i.bufferTransformVec3(r.buffer,0,this.buffer,0,r.buffer,0),r},i.prototype.transformVec2Pos=function(r,t){return i.bufferTransformVec2Pos(r.buffer,0,this.buffer,0,t.buffer,0),r},i.prototype.transformVec2PosInPlace=function(r){return i.bufferTransformVec2Pos(r.buffer,0,this.buffer,0,r.buffer,0),r},i.prototype.transformVec2Dir=function(r,t){return i.bufferTransformVec2Dir(r.buffer,0,this.buffer,0,t.buffer,0),r},i.prototype.transformVec2DirInPlace=function(r){return i.bufferTransformVec2Dir(r.buffer,0,this.buffer,0,r.buffer,0),r},i.NB_COMPONENTS=9,i.IDENTITY=new i,i.createBuffer=function(r){r*=9;for(var t=new Float32Array(r),e=0;e<r;e+=9)t[e]=t[e+4]=t[e+8]=1;return t},i.bufferSetFromQuat=function(r,t,e,f){var u=e[f],n=e[f+1],i=e[f+2],o=e[f+3],s=u+u,b=s*u,a=s*n,h=s*i,c=s*o,l=n+n,p=l*n,I=l*i,_=l*o,S=i+i,E=S*i,N=S*o;return r[t]=1-p-E,r[t+1]=N+a,r[t+2]=h-_,r[t+3]=a-N,r[t+4]=1-b-E,r[t+5]=c+I,r[t+6]=_+h,r[t+7]=I-c,r[t+8]=1-b-p,r},i.bufferSetFromMat4RotScale=function(r,t,e,f){return r[t]=e[f],r[t+1]=e[f+1],r[t+2]=e[f+2],r[t+3]=e[f+4],r[t+4]=e[f+5],r[t+5]=e[f+6],r[t+6]=e[f+8],r[t+7]=e[f+9],r[t+8]=e[f+10],r},i.bufferSetFromRSTransfo3D=function(r,t,e,f,u,n){var i=e[f],o=e[f+1],s=e[f+2],b=e[f+3],a=i+i,h=a*i,c=a*o,l=a*s,p=a*b,I=o+o,_=I*o,S=I*s,E=I*b,N=s+s,d=N*s,P=N*b,m=u[n],y=u[n+1],T=u[n+2];return r[t]=(1-_-d)*m,r[t+1]=(P+c)*m,r[t+2]=(l-E)*m,r[t+3]=(c-P)*y,r[t+4]=(1-h-d)*y,r[t+5]=(p+S)*y,r[t+6]=(E+l)*T,r[t+7]=(S-p)*T,r[t+8]=(1-h-_)*T,r},i.bufferSetRotation2D=function(r,t,e){var u=f.cos(e),n=f.sin(e);return r[t]=u,r[t+1]=n,r[t+2]=0,r[t+3]=-n,r[t+4]=u,r[t+5]=0,r},i.bufferSetRotScale2DFromMat2=function(r,t,e,f){return r[t]=e[f],r[t+1]=e[f+1],r[t+2]=0,r[t+3]=e[f+2],r[t+4]=e[f+3],r[t+5]=0,r},i.bufferSetFromTRSTransfo2D=function(r,t,e,u,n,i,o){var s=f.cos(n),b=f.sin(n),a=i[o],h=i[o+1];return r[t]=s*a,r[t+1]=b*a,r[t+2]=0,r[t+3]=-b*h,r[t+4]=s*h,r[t+5]=0,r[t+6]=e[u],r[t+7]=e[u+1],r[t+8]=1,r};var o=new Float32Array(12);i._orthoNormalizeTransfo=function(r,t,e){var u=r[t],n=r[t+1],i=r[t+2],s=u*u+n*n+i*i;s<f.EPSILON2?o[9]=u=n=i=0:(o[9]=s=f.sqrt(s),u*=s=1/s,n*=s,i*=s);var b=r[t+=e],a=r[t+1],h=r[t+2];b-=(s=b*u+a*n+h*i)*u,a-=s*n,h-=s*i;var c=r[t+=e],l=r[t+1],p=r[t+2];return c-=(s=c*u+l*n+p*i)*u,l-=s*n,p-=s*i,(s=b*b+a*a+h*h)<f.EPSILON2?o[10]=b=a=h=0:(o[10]=s=f.sqrt(s),b*=s=1/s,a*=s,h*=s),(s=(c-=(s=c*b+l*a+p*h)*b)*c+(l-=s*a)*l+(p-=s*h)*p)<f.EPSILON2?o[11]=c=l=p=0:(o[11]=s=f.sqrt(s),c*=s=1/s,l*=s,p*=s),o[0]=u,o[1]=n,o[2]=i,o[3]=b,o[4]=a,o[5]=h,o[6]=c,o[7]=l,o[8]=p,o},i.bufferGetRSTransfo3D=function(r,t,e,f,n,o){var s=i._orthoNormalizeTransfo(n,o,3);return e[f]=s[9],e[f+1]=s[10],e[f+2]=s[11],u.bufferSetFromRotationMat3(r,t,s,0),n},i.bufferNormalizeRSTransfo3D=function(r,t,e,f){var u=i._orthoNormalizeTransfo(e,f,3),n=u[9],o=u[10],s=u[11];return r[t]=u[0]*n,r[t+1]=u[1]*n,r[t+2]=u[2]*n,r[t+3]=u[3]*o,r[t+4]=u[4]*o,r[t+5]=u[5]*o,r[t+6]=u[6]*s,r[t+7]=u[7]*s,r[t+8]=u[8]*s,r},i.bufferGetTRSTransfo2D=function(r,t,e,u,i,o){var s=n._orthoNormalizeTransfo(i,o,3);return e[u]=s[4],e[u+1]=s[5],r[t]=i[o+6],r[t+1]=i[o+7],f.atan2(s[1],s[0])},i.bufferNormalizeTRSTransfo2D=function(r,t,e,f){var u=n._orthoNormalizeTransfo(e,f,3),i=u[4],o=u[5];return r[t]=u[0]*i,r[t+1]=u[1]*i,r[t+2]=0,r[t+3]=u[2]*o,r[t+4]=u[3]*o,r[t+5]=0,r[t+6]=e[f+6],r[t+7]=e[f+7],r[t+8]=1,r},i.bufferIsIdentity=function(r,t){return f.abs(r[t]-1)<f.EPSILON&&f.abs(r[t+1])<f.EPSILON&&f.abs(r[t+2])<f.EPSILON&&f.abs(r[t+3])<f.EPSILON&&f.abs(r[t+4]-1)<f.EPSILON&&f.abs(r[t+5])<f.EPSILON&&f.abs(r[t+6])<f.EPSILON&&f.abs(r[t+7])<f.EPSILON&&f.abs(r[t+8]-1)<f.EPSILON},i.bufferEquals=function(r,t,e,u){return r===e&&t===u||f.abs(e[u]-r[t])<f.EPSILON&&f.abs(e[u+1]-r[t+1])<f.EPSILON&&f.abs(e[u+2]-r[t+2])<f.EPSILON&&f.abs(e[u+3]-r[t+3])<f.EPSILON&&f.abs(e[u+4]-r[t+4])<f.EPSILON&&f.abs(e[u+5]-r[t+5])<f.EPSILON&&f.abs(e[u+6]-r[t+6])<f.EPSILON&&f.abs(e[u+7]-r[t+7])<f.EPSILON&&f.abs(e[u+8]-r[t+8])<f.EPSILON},i.bufferMultiply=function(r,t,e,f,u,n){var i=e[f],o=e[f+1],s=e[f+2],b=e[f+3],a=e[f+4],h=e[f+5],c=e[f+6],l=e[f+7],p=e[f+8],I=u[n],_=u[n+1],S=u[n+2];return r[t]=I*i+_*b+S*c,r[t+1]=I*o+_*a+S*l,r[t+2]=I*s+_*h+S*p,I=u[n+3],_=u[n+4],S=u[n+5],r[t+3]=I*i+_*b+S*c,r[t+4]=I*o+_*a+S*l,r[t+5]=I*s+_*h+S*p,I=u[n+6],_=u[n+7],S=u[n+8],r[t+6]=I*i+_*b+S*c,r[t+7]=I*o+_*a+S*l,r[t+8]=I*s+_*h+S*p,r},i.bufferInvert=function(r,t,e,u){var n=e[u],i=e[u+1],o=e[u+2],s=e[u+3],b=e[u+4],a=e[u+5],h=e[u+6],c=e[u+7],l=e[u+8],p=b*l-c*a,I=h*a-s*l,_=s*c-h*b,S=n*p+i*I+o*_;return f.abs(S)<f.EPSILON?(r[t]=r[t+1]=r[t+2]=r[t+3]=r[t+4]=r[t+5]=r[t+6]=r[t+7]=r[t+8]=S>=0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY,r):(S=1/S,r[t]=p*S,r[t+1]=(c*o-i*l)*S,r[t+2]=(i*a-b*o)*S,r[t+3]=I*S,r[t+4]=(n*l-h*o)*S,r[t+5]=(s*o-n*a)*S,r[t+6]=_*S,r[t+7]=(h*i-n*c)*S,r[t+8]=(n*b-s*i)*S,r)},i.bufferTranspose=function(r,t,e,f){var u=e[f+1],n=e[f+2],i=e[f+5];return r[t]=e[f],r[t+1]=e[f+3],r[t+2]=e[f+6],r[t+3]=u,r[t+4]=e[f+4],r[t+5]=e[f+7],r[t+6]=n,r[t+7]=i,r[t+8]=e[f+8],r},i.bufferTransformVec3=function(r,t,e,f,u,n){var i=u[n],o=u[n+1],s=u[n+2];return r[t]=i*e[f]+o*e[f+3]+s*e[f+6],r[t+1]=i*e[f+1]+o*e[f+4]+s*e[f+7],r[t+2]=i*e[f+2]+o*e[f+5]+s*e[f+8],r},i.bufferTransformVec2Pos=function(r,t,e,f,u,n){var i=u[n],o=u[n+1];return r[t]=i*e[f]+o*e[f+3]+e[f+6],r[t+1]=i*e[f+1]+o*e[f+4]+e[f+7],r},i.bufferTransformVec2Dir=function(r,t,e,f,u,n){var i=u[n],o=u[n+1];return r[t]=i*e[f]+o*e[f+3],r[t+1]=i*e[f+1]+o*e[f+4],r}},,function(r,t,e){"use strict";var f=e(8);f.Shader=e(9),f.math=e(0),f.Vec2=e(10),f.Vec3=e(11),f.Vec4=e(3),f.Quat=e(2),f.Mat2=e(4),f.Mat3=e(5),f.Mat4=e(12),f.Mesh=e(1),f.PlaneMesh=e(13),window.neo3d=r.exports=f},function(r,t,e){"use strict";var f=r.exports={},u=[],n=Object.freeze({FIRST_INIT:0,CTX_LOST:1,NEED_INIT_AFTER_LOST:2,READY:3}),i=function(r,t){r.getExtension("OES_element_index_uint")&&(r._bExtendedIndexType=!0),this._gl=r,this._rdr=t,this._autoDraw=!0,this._lastDrawingBufferWidth=0,this._lastDrawingBufferHeight=0,this._glCtxState=n.FIRST_INIT;var e=this;this._ctxLostListener=function(r){r.preventDefault(),e._glCtxState=n.CTX_LOST,e._gl&&e._gl._activeShader&&e._gl._activeShader.unbind()},this._ctxRestoredListener=function(){e._glCtxState=n.NEED_INIT_AFTER_LOST},r.canvas.addEventListener("webglcontextlost",this._ctxLostListener),r.canvas.addEventListener("webglcontextrestored",this._ctxRestoredListener)};i.prototype.destroy=function(){if(this._gl){var r=this._gl.canvas;r.removeEventListener("webglcontextlost",this._ctxLostListener),r.removeEventListener("webglcontextrestored",this._ctxRestoredListener);for(var t=u.length,e=0;e<t;++e)if(u[e]===this){u.splice(e,1);break}this._gl=null,this._rdr=null,r.width++,r.width--}},i.prototype._renderFrame=function(r){this._gl&&this._glCtxState!==n.CTX_LOST&&(this._glCtxState!==n.READY&&(this._lastDrawingBufferWidth=0,this._lastDrawingBufferHeight=0,this._rdr.onInitContext(this._gl,this._glCtxState===n.NEED_INIT_AFTER_LOST),this._glCtxState=n.READY),this._lastDrawingBufferWidth===this._gl.drawingBufferWidth&&this._lastDrawingBufferHeight===this._gl.drawingBufferHeight||(this._lastDrawingBufferWidth=this._gl.drawingBufferWidth,this._lastDrawingBufferHeight=this._gl.drawingBufferHeight,this._rdr.onSurfaceResized(this._gl,this._lastDrawingBufferWidth,this._lastDrawingBufferHeight)),this._rdr.onDrawFrame(this._gl,r))};var o=window.performance&&(window.performance.now||window.performance.mozNow||window.performance.webkitNow||window.performance.oNow||window.performance.msNow)||Date.now;i.prototype.drawSingleFrame=function(){this._renderFrame(o())},i.prototype.setAutoDrawing=function(r){this._autoDraw=!!r},i.prototype.isAutoDrawing=function(){return this._autoDraw};var s=0,b=0,a=0,h=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(r){return window.setTimeout(r,16)},c=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(r){window.clearTimeout(r)};function l(r){if(s){if(b){var t=r-b;t>0&&(a=.9*a+100/t)}b=r;for(var e=u.length,f=0;f<e;++f){var n=u[f];if(n._autoDraw)try{n._renderFrame(r)}catch(r){window.console.warn("cannot draw GL frame on rendering surface #"+f+" ("+r.message+")")}}s&&(s=h(l))}}f.createRenderingSurface=function(r,t,e,f){if("string"==typeof r&&r&&(r=document.getElementById(r)),!(r instanceof HTMLCanvasElement&&t&&"object"==typeof t&&"function"==typeof t.onInitContext&&"function"==typeof t.onSurfaceResized&&"function"==typeof t.onDrawFrame))return null;for(var n=u.length,o=0;o<n;++o)if(u[o]._gl.canvas===r)return null;try{var s=r.getContext("webgl",{antialias:!0===e,alpha:!0===f});if(s instanceof WebGLRenderingContext){var b=new i(s,t);return u.push(b),b}}catch(r){window.console.error("cannot fetch GL context ("+r.message+")")}return null},f.findRenderingSurface=function(r){if("string"==typeof r&&r&&(r=document.getElementById(r)),r instanceof HTMLCanvasElement)for(var t=u.length,e=0;e<t;++e){var f=u[e];if(f._gl.canvas===r)return f}return null},f.startDrawing=function(){s||(s=h(l))},f.stopDrawing=function(){s&&(c(s),s=0,b=0,a=0)},f.isDrawing=function(){return!!s},f.getFPS=function(){return a},f.load2DTexture=function(r,t,e,f){if(r instanceof WebGLRenderingContext&&(t instanceof HTMLImageElement&&t.complete||t instanceof ImageData||t instanceof HTMLCanvasElement)){var u=r.createTexture();r.bindTexture(r.TEXTURE_2D,u),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);try{r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t)}catch(t){return r.bindTexture(r.TEXTURE_2D,null),r.deleteTexture(u),window.console.warn("cannot transfer texture data ("+t.message+")"),null}var n=r.REPEAT;e&&(n=r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),f?r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR),r.generateMipmap(r.TEXTURE_2D)),r.bindTexture(r.TEXTURE_2D,null);var i=r.getError();return i!==r.NO_ERROR&&(i!==r.CONTEXT_LOST_WEBGL&&(window.console.warn("cannot load 2D texture (err: #"+i+")"),r.deleteTexture(u)),u=null),u}return null}},function(r,t,e){"use strict";var f=e(1),u=r.exports=function(r,t){this._prog=null,this._gl=null,this._lastDrawnMesh=null,this._overridenPrimitiveType=f.PRIMITIVE_TYPE.NO_PRIMITIVE,r&&"string"==typeof r&&t&&"string"==typeof t?(this._vtxSrc=r,this._fragSrc=t):this._vtxSrc=this._fragSrc=null};function n(r,t,e){var f=r.createShader(t);return r.shaderSource(f,e),r.compileShader(f),r.getShaderParameter(f,r.COMPILE_STATUS)||(r.isContextLost()||(window.console.warn("cannot compile shader:\n"+r.getShaderInfoLog(f)),r.deleteShader(f)),f=null),f}u.prototype._initShaderLocations=function(){},u.prototype._bindShader=function(){return!0},u.prototype._unbindShader=function(){},u.prototype._bindMeshAttribs=function(){return!0},u.prototype.init=function(r,t){if(!this._vtxSrc||!this._fragSrc||!(r instanceof WebGLRenderingContext)||r.isContextLost()||this._gl&&this._gl!==r)return!1;if(t)this._prog=null,this.unbind();else if(this._prog)return!0;var e=n(r,r.VERTEX_SHADER,this._vtxSrc);if(e){var f=n(r,r.FRAGMENT_SHADER,this._fragSrc);if(f){if(this._prog=function(r,t,e){var f=r.createProgram();return r.attachShader(f,t),r.attachShader(f,e),r.linkProgram(f),r.getProgramParameter(f,r.LINK_STATUS)||(r.isContextLost()||(window.console.warn("cannot link program:\n"+r.getProgramInfoLog(f)),r.deleteProgram(f)),f=null),f}(r,e,f),r.deleteShader(e),r.deleteShader(f),this._prog)return this._gl=r,this._initShaderLocations(),!0}else r.deleteShader(e)}return!1},u.prototype.shut=function(){this.unbind(),this._prog&&!this._gl.isContextLost()&&this._gl.deleteProgram(this._prog),this._prog=null,this._gl=null},u.prototype.bind=function(){return!(!this._prog||this._gl.isContextLost())&&(this._gl._activeShader===this||(this._gl._activeShader&&this._gl._activeShader.unbind(),this._gl.useProgram(this._prog),this._bindShader()?(this._gl._activeShader=this,!0):(this._unbindShader(),this._gl.useProgram(null),!1)))},u.prototype.unbind=function(){this._gl&&this._gl._activeShader===this&&(this._gl._activeShader=null,this._unbindShader(),this._gl.isContextLost()||(this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,null),this._gl.useProgram(null))),this._lastDrawnMesh=null},u.prototype.isBound=function(){return this._gl&&this._gl._activeShader===this},u.getActiveShader=function(r){return r instanceof WebGLRenderingContext&&r._activeShader instanceof u?r._activeShader:null},u.prototype.drawMesh=function(r,t,e){if(this._gl&&this._gl._activeShader===this&&!this._gl.isContextLost()&&r instanceof f&&r.isReady(this._gl)){if(r!==this._lastDrawnMesh){if(!this._bindMeshAttribs(r))return this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,null),this._lastDrawnMesh=null,!1;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,r.getIndexVBO()),this._lastDrawnMesh=r}var u=this._overridenPrimitiveType;switch(u===f.PRIMITIVE_TYPE.NO_PRIMITIVE&&(u=r.getPrimitiveType()),u){case f.PRIMITIVE_TYPE.POINTS:u=this._gl.POINTS;break;case f.PRIMITIVE_TYPE.LINES:u=this._gl.LINES;break;case f.PRIMITIVE_TYPE.LINE_STRIP:u=this._gl.LINE_STRIP;break;case f.PRIMITIVE_TYPE.LINE_LOOP:u=this._gl.LINE_LOOP;break;case f.PRIMITIVE_TYPE.TRIANGLES:u=this._gl.TRIANGLES;break;case f.PRIMITIVE_TYPE.TRIANGLE_STRIP:u=this._gl.TRIANGLE_STRIP;break;case f.PRIMITIVE_TYPE.TRIANGLE_FAN:u=this._gl.TRIANGLE_FAN;break;default:return!1}"number"==typeof t?t<0&&(t=0):t=0;var n=r.getPointCount()-t;if("number"==typeof e?e>n&&(e=n):e=n,e<=0)return!0;switch(r.getIndexType()){case f.INDEX_TYPE.NO_INDEX:this._gl.drawArrays(u,t,e);break;case f.INDEX_TYPE.UNSIGNED_SHORT:this._gl.drawElements(u,e,this._gl.UNSIGNED_SHORT,2*t);break;case f.INDEX_TYPE.UNSIGNED_INT:this._gl.drawElements(u,e,this._gl.UNSIGNED_INT,4*t);break;default:return!1}return!0}return!1}},function(r,t,e){"use strict";var f=e(0),u=r.exports=function(){this.buffer=new Float32Array(2)};u.prototype.setFromValues=function(r,t){return this.buffer[0]=r,this.buffer[1]=t,this},u.prototype.setFromArray=function(r){return this.buffer[0]=r[0],this.buffer[1]=r[1],this},u.prototype.setNull=function(){return this.buffer[0]=this.buffer[1]=0,this},u.prototype.setOne=function(){return this.buffer[0]=this.buffer[1]=1,this},u.prototype.copy=function(r){return this.buffer[0]=r.buffer[0],this.buffer[1]=r.buffer[1],this},u.prototype.isNull=function(){return u.bufferIsNull(this.buffer,0)},u.prototype.equals=function(r){return u.bufferEquals(this.buffer,0,r.buffer,0)},u.prototype.add=function(r,t){return u.bufferAdd(this.buffer,0,r.buffer,0,t.buffer,0),this},u.prototype.addInPlace=function(r){return u.bufferAddInPlace(this.buffer,0,r.buffer,0),this},u.prototype.substract=function(r,t){return u.bufferSubstract(this.buffer,0,r.buffer,0,t.buffer,0),this},u.prototype.substractInPlace=function(r){return u.bufferSubstractInPlace(this.buffer,0,r.buffer,0),this},u.prototype.scale=function(r,t){return u.bufferScale(this.buffer,0,r,t.buffer,0),this},u.prototype.scaleInPlace=function(r){return u.bufferScaleInPlace(this.buffer,0,r),this},u.prototype.addScaled=function(r,t,e){return u.bufferAddScaled(this.buffer,0,r.buffer,0,t,e.buffer,0),this},u.prototype.addScaledInPlace=function(r,t){return u.bufferAddScaledInPlace(this.buffer,0,r,t.buffer,0),this},u.prototype.negate=function(r){return u.bufferNegate(this.buffer,0,r.buffer,0),this},u.prototype.negateInPlace=function(){return u.bufferNegate(this.buffer,0,this.buffer,0),this},u.prototype.squareDistance=function(r){return u.bufferSquareDistance(this.buffer,0,r.buffer,0)},u.prototype.distance=function(r){return u.bufferDistance(this.buffer,0,r.buffer,0)},u.prototype.squareNorm=function(){return u.bufferSquareNorm(this.buffer,0)},u.prototype.norm=function(){return u.bufferNorm(this.buffer,0)},u.prototype.normalize=function(r){return u.bufferNormalize(this.buffer,0,r.buffer,0),this},u.prototype.normalizeInPlace=function(){return u.bufferNormalize(this.buffer,0,this.buffer,0),this},u.prototype.dotProduct=function(r){return u.bufferDotProduct(this.buffer,0,r.buffer,0)},u.prototype.shortestAngle=function(r){return u.bufferShortestAngle(this.buffer,0,r.buffer,0)},u.prototype.isPerpendicular=function(r){return u.bufferArePerpendicular(this.buffer,0,r.buffer,0)},u.prototype.isColinear=function(r){return u.bufferAreColinear(this.buffer,0,r.buffer,0)},u.prototype.linear=function(r,t,e){return u.bufferLinear(this.buffer,0,r.buffer,0,t,e.buffer,0),this},u.prototype.quadratic=function(r,t,e,f){return u.bufferQuadratic(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0),this},u.prototype.hermite=function(r,t,e,f,n){return u.bufferHermite(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0,n.buffer,0),this},u.prototype.bezier=function(r,t,e,f,n){return u.bufferBezier(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0,n.buffer,0),this},u.prototype.catmullRom=function(r,t,e,f,n){return u.bufferCatmullRom(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0,n.buffer,0),this},u.NB_COMPONENTS=2,u.I=(new u).setFromValues(1,0),u.J=(new u).setFromValues(0,1),u.createBuffer=function(r){return new Float32Array(2*r)},u.bufferIsNull=function(r,t){return f.abs(r[t])<f.EPSILON&&f.abs(r[t+1])<f.EPSILON},u.bufferEquals=function(r,t,e,u){return r===e&&t===u||f.abs(e[u]-r[t])<f.EPSILON&&f.abs(e[u+1]-r[t+1])<f.EPSILON},u.bufferAdd=function(r,t,e,f,u,n){return r[t]=e[f]+u[n],r[t+1]=e[f+1]+u[n+1],r},u.bufferAddInPlace=function(r,t,e,f){return r[t]+=e[f],r[t+1]+=e[f+1],r},u.bufferSubstract=function(r,t,e,f,u,n){return r[t]=e[f]-u[n],r[t+1]=e[f+1]-u[n+1],r},u.bufferSubstractInPlace=function(r,t,e,f){return r[t]-=e[f],r[t+1]-=e[f+1],r},u.bufferScale=function(r,t,e,f,u){return r[t]=e*f[u],r[t+1]=e*f[u+1],r},u.bufferScaleInPlace=function(r,t,e){return r[t]*=e,r[t+1]*=e,r},u.bufferAddScaled=function(r,t,e,f,u,n,i){return r[t]=e[f]+u*n[i],r[t+1]=e[f+1]+u*n[i+1],r},u.bufferAddScaledInPlace=function(r,t,e,f,u){return r[t]+=e*f[u],r[t+1]+=e*f[u+1],r},u.bufferNegate=function(r,t,e,f){return r[t]=-e[f],r[t+1]=-e[f+1],r},u.bufferSquareDistance=function(r,t,e,f){var u=e[f]-r[t],n=e[f+1]-r[t+1];return u*u+n*n},u.bufferDistance=function(r,t,e,u){var n=e[u]-r[t],i=e[u+1]-r[t+1];return f.sqrt(n*n+i*i)},u.bufferSquareNorm=function(r,t){var e=r[t],f=r[t+1];return e*e+f*f},u.bufferNorm=function(r,t){var e=r[t],u=r[t+1];return f.sqrt(e*e+u*u)},u.bufferNormalize=function(r,t,e,u){var n=e[u],i=e[u+1],o=n*n+i*i;return o<f.EPSILON2?(r[t]=r[t+1]=0,r):(o=1/f.sqrt(o),r[t]=n*o,r[t+1]=i*o,r)},u.bufferDotProduct=function(r,t,e,f){return r[t]*e[f]+r[t+1]*e[f+1]},u.bufferShortestAngle=function(r,t,e,u){var n=r[t],i=r[t+1],o=n*n+i*i;if(o<f.EPSILON2)return 0;var s=e[u],b=e[u+1],a=s*s+b*b;if(a<f.EPSILON2)return 0;var h=n*s+i*b;return f.abs(h)<f.EPSILON?f.HALF_PI:(h/=f.sqrt(o*a))>1-f.EPSILON?0:h<f.EPSILON-1?f.PI:f.acos(h)},u.bufferArePerpendicular=function(r,t,e,u){var n=r[t],i=r[t+1],o=e[u],s=e[u+1];return(f.abs(n)>=f.EPSILON||f.abs(i)>=f.EPSILON)&&(f.abs(o)>=f.EPSILON||f.abs(s)>=f.EPSILON)&&f.abs(n*o+i*s)<f.EPSILON},u.bufferAreColinear=function(r,t,e,u){var n=r[t],i=r[t+1],o=e[u],s=e[u+1];return(f.abs(n)>=f.EPSILON||f.abs(i)>=f.EPSILON)&&(f.abs(o)>=f.EPSILON||f.abs(s)>=f.EPSILON)&&f.abs(n*s-o*i)<f.EPSILON},u.bufferLinear=function(r,t,e,f,u,n,i){var o=e[f],s=e[f+1];return r[t]=o+u*(n[i]-o),r[t+1]=s+u*(n[i+1]-s),r},u.bufferQuadratic=function(r,t,e,f,u,n,i,o,s){var b=.5*(i-1)*i,a=1-i*i,h=.5*(i+1)*i;return r[t]=b*e[f]+a*u[n]+h*o[s],r[t+1]=b*e[f+1]+a*u[n+1]+h*o[s+1],r},u.bufferHermite=function(r,t,e,f,u,n,i,o,s,b,a){var h=i*i,c=h*(i-2)+i,l=h*(2*i-3)+1,p=h*(3-2*i),I=h*(i-1);return r[t]=c*e[f]+l*u[n]+p*o[s]+I*b[a],r[t+1]=c*e[f+1]+l*u[n+1]+p*o[s+1]+I*b[a+1],r},u.bufferBezier=function(r,t,e,f,u,n,i,o,s,b,a){var h=i*i,c=1-i,l=c*c,p=3*l*i,I=l*c,_=h*i,S=3*c*h;return r[t]=p*e[f]+I*u[n]+_*o[s]+S*b[a],r[t+1]=p*e[f+1]+I*u[n+1]+_*o[s+1]+S*b[a+1],r},u.bufferCatmullRom=function(r,t,e,f,u,n,i,o,s,b,a){var h=i*i,c=-.5*i,l=c*(h+1)+h,p=c*(5*i-3*h)+1,I=c*(3*h-4*i-1),_=c*(i-h);return r[t]=l*e[f]+p*u[n]+I*o[s]+_*b[a],r[t+1]=l*e[f+1]+p*u[n+1]+I*o[s+1]+_*b[a+1],r}},function(r,t,e){"use strict";var f=e(0),u=r.exports=function(){this.buffer=new Float32Array(3)};u.prototype.setFromValues=function(r,t,e){return this.buffer[0]=r,this.buffer[1]=t,this.buffer[2]=e,this},u.prototype.setFromArray=function(r){return this.buffer[0]=r[0],this.buffer[1]=r[1],this.buffer[2]=r[2],this},u.prototype.setFromVec2Pos=function(r){return this.buffer[0]=r.buffer[0],this.buffer[1]=r.buffer[1],this.buffer[2]=1,this},u.prototype.setFromVec2Dir=function(r){return this.buffer[0]=r.buffer[0],this.buffer[1]=r.buffer[1],this.buffer[2]=0,this},u.prototype.setNull=function(){return this.buffer[0]=this.buffer[1]=this.buffer[2]=0,this},u.prototype.setOne=function(){return this.buffer[0]=this.buffer[1]=this.buffer[2]=1,this},u.prototype.copy=function(r){return this.buffer[0]=r.buffer[0],this.buffer[1]=r.buffer[1],this.buffer[2]=r.buffer[2],this},u.prototype.isNull=function(){return u.bufferIsNull(this.buffer,0)},u.prototype.equals=function(r){return u.bufferEquals(this.buffer,0,r.buffer,0)},u.prototype.add=function(r,t){return u.bufferAdd(this.buffer,0,r.buffer,0,t.buffer,0),this},u.prototype.addInPlace=function(r){return u.bufferAddInPlace(this.buffer,0,r.buffer,0),this},u.prototype.substract=function(r,t){return u.bufferSubstract(this.buffer,0,r.buffer,0,t.buffer,0),this},u.prototype.substractInPlace=function(r){return u.bufferSubstractInPlace(this.buffer,0,r.buffer,0),this},u.prototype.scale=function(r,t){return u.bufferScale(this.buffer,0,r,t.buffer,0),this},u.prototype.scaleInPlace=function(r){return u.bufferScaleInPlace(this.buffer,0,r),this},u.prototype.addScaled=function(r,t,e){return u.bufferAddScaled(this.buffer,0,r.buffer,0,t,e.buffer,0),this},u.prototype.addScaledInPlace=function(r,t){return u.bufferAddScaledInPlace(this.buffer,0,r,t.buffer,0),this},u.prototype.negate=function(r){return u.bufferNegate(this.buffer,0,r.buffer,0),this},u.prototype.negateInPlace=function(){return u.bufferNegate(this.buffer,0,this.buffer,0),this},u.prototype.squareDistance=function(r){return u.bufferSquareDistance(this.buffer,0,r.buffer,0)},u.prototype.distance=function(r){return u.bufferDistance(this.buffer,0,r.buffer,0)},u.prototype.squareNorm=function(){return u.bufferSquareNorm(this.buffer,0)},u.prototype.norm=function(){return u.bufferNorm(this.buffer,0)},u.prototype.normalize=function(r){return u.bufferNormalize(this.buffer,0,r.buffer,0),this},u.prototype.normalizeInPlace=function(){return u.bufferNormalize(this.buffer,0,this.buffer,0),this},u.prototype.dotProduct=function(r){return u.bufferDotProduct(this.buffer,0,r.buffer,0)},u.prototype.crossProduct=function(r,t){return u.bufferCrossProduct(this.buffer,0,r.buffer,0,t.buffer,0),this},u.prototype.crossProductInPlace=function(r){return u.bufferCrossProduct(this.buffer,0,this.buffer,0,r.buffer,0),this},u.prototype.shortestAngle=function(r){return u.bufferShortestAngle(this.buffer,0,r.buffer,0)},u.prototype.isPerpendicular=function(r){return u.bufferArePerpendicular(this.buffer,0,r.buffer,0)},u.prototype.isColinear=function(r){return u.bufferAreColinear(this.buffer,0,r.buffer,0)},u.prototype.linear=function(r,t,e){return u.bufferLinear(this.buffer,0,r.buffer,0,t,e.buffer,0),this},u.prototype.quadratic=function(r,t,e,f){return u.bufferQuadratic(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0),this},u.prototype.hermite=function(r,t,e,f,n){return u.bufferHermite(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0,n.buffer,0),this},u.prototype.bezier=function(r,t,e,f,n){return u.bufferBezier(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0,n.buffer,0),this},u.prototype.catmullRom=function(r,t,e,f,n){return u.bufferCatmullRom(this.buffer,0,r.buffer,0,t.buffer,0,e,f.buffer,0,n.buffer,0),this},u.NB_COMPONENTS=3,u.I=(new u).setFromValues(1,0,0),u.J=(new u).setFromValues(0,1,0),u.K=(new u).setFromValues(0,0,1),u.createBuffer=function(r){return new Float32Array(3*r)},u.bufferIsNull=function(r,t){return f.abs(r[t])<f.EPSILON&&f.abs(r[t+1])<f.EPSILON&&f.abs(r[t+2])<f.EPSILON},u.bufferEquals=function(r,t,e,u){return r===e&&t===u||f.abs(e[u]-r[t])<f.EPSILON&&f.abs(e[u+1]-r[t+1])<f.EPSILON&&f.abs(e[u+2]-r[t+2])<f.EPSILON},u.bufferAdd=function(r,t,e,f,u,n){return r[t]=e[f]+u[n],r[t+1]=e[f+1]+u[n+1],r[t+2]=e[f+2]+u[n+2],r},u.bufferAddInPlace=function(r,t,e,f){return r[t]+=e[f],r[t+1]+=e[f+1],r[t+2]+=e[f+2],r},u.bufferSubstract=function(r,t,e,f,u,n){return r[t]=e[f]-u[n],r[t+1]=e[f+1]-u[n+1],r[t+2]=e[f+2]-u[n+2],r},u.bufferSubstractInPlace=function(r,t,e,f){return r[t]-=e[f],r[t+1]-=e[f+1],r[t+2]-=e[f+2],r},u.bufferScale=function(r,t,e,f,u){return r[t]=e*f[u],r[t+1]=e*f[u+1],r[t+2]=e*f[u+2],r},u.bufferScaleInPlace=function(r,t,e){return r[t]*=e,r[t+1]*=e,r[t+2]*=e,r},u.bufferAddScaled=function(r,t,e,f,u,n,i){return r[t]=e[f]+u*n[i],r[t+1]=e[f+1]+u*n[i+1],r[t+2]=e[f+2]+u*n[i+2],r},u.bufferAddScaledInPlace=function(r,t,e,f,u){return r[t]+=e*f[u],r[t+1]+=e*f[u+1],r[t+2]+=e*f[u+2],r},u.bufferNegate=function(r,t,e,f){return r[t]=-e[f],r[t+1]=-e[f+1],r[t+2]=-e[f+2],r},u.bufferSquareDistance=function(r,t,e,f){var u=e[f]-r[t],n=e[f+1]-r[t+1],i=e[f+2]-r[t+2];return u*u+n*n+i*i},u.bufferDistance=function(r,t,e,u){var n=e[u]-r[t],i=e[u+1]-r[t+1],o=e[u+2]-r[t+2];return f.sqrt(n*n+i*i+o*o)},u.bufferSquareNorm=function(r,t){var e=r[t],f=r[t+1],u=r[t+2];return e*e+f*f+u*u},u.bufferNorm=function(r,t){var e=r[t],u=r[t+1],n=r[t+2];return f.sqrt(e*e+u*u+n*n)},u.bufferNormalize=function(r,t,e,u){var n=e[u],i=e[u+1],o=e[u+2],s=n*n+i*i+o*o;return s<f.EPSILON2?(r[t]=r[t+1]=r[t+2]=0,r):(s=1/f.sqrt(s),r[t]=n*s,r[t+1]=i*s,r[t+2]=o*s,r)},u.bufferDotProduct=function(r,t,e,f){return r[t]*e[f]+r[t+1]*e[f+1]+r[t+2]*e[f+2]},u.bufferCrossProduct=function(r,t,e,f,u,n){var i=e[f],o=e[f+1],s=e[f+2],b=u[n],a=u[n+1],h=u[n+2];return r[t]=o*h-a*s,r[t+1]=s*b-h*i,r[t+2]=i*a-b*o,r},u.bufferShortestAngle=function(r,t,e,u){var n=r[t],i=r[t+1],o=r[t+2],s=n*n+i*i+o*o;if(s<f.EPSILON2)return 0;var b=e[u],a=e[u+1],h=e[u+2],c=b*b+a*a+h*h;if(c<f.EPSILON2)return 0;var l=n*b+i*a+o*h;return f.abs(l)<f.EPSILON?f.HALF_PI:(l/=f.sqrt(s*c))>1-f.EPSILON?0:l<f.EPSILON-1?f.PI:f.acos(l)},u.bufferArePerpendicular=function(r,t,e,u){var n=r[t],i=r[t+1],o=r[t+2],s=e[u],b=e[u+1],a=e[u+2];return(f.abs(n)>=f.EPSILON||f.abs(i)>=f.EPSILON||f.abs(o)>=f.EPSILON)&&(f.abs(s)>=f.EPSILON||f.abs(b)>=f.EPSILON||f.abs(a)>=f.EPSILON)&&f.abs(n*s+i*b+o*a)<f.EPSILON},u.bufferAreColinear=function(r,t,e,u){var n=r[t],i=r[t+1],o=r[t+2],s=e[u],b=e[u+1],a=e[u+2];return(f.abs(n)>=f.EPSILON||f.abs(i)>=f.EPSILON||f.abs(o)>=f.EPSILON)&&(f.abs(s)>=f.EPSILON||f.abs(b)>=f.EPSILON||f.abs(a)>=f.EPSILON)&&f.abs(i*a-b*o)<f.EPSILON&&f.abs(o*s-a*n)<f.EPSILON&&f.abs(n*b-s*i)<f.EPSILON},u.bufferLinear=function(r,t,e,f,u,n,i){var o=e[f],s=e[f+1],b=e[f+2];return r[t]=o+u*(n[i]-o),r[t+1]=s+u*(n[i+1]-s),r[t+2]=b+u*(n[i+2]-b),r},u.bufferQuadratic=function(r,t,e,f,u,n,i,o,s){var b=.5*(i-1)*i,a=1-i*i,h=.5*(i+1)*i;return r[t]=b*e[f]+a*u[n]+h*o[s],r[t+1]=b*e[f+1]+a*u[n+1]+h*o[s+1],r[t+2]=b*e[f+2]+a*u[n+2]+h*o[s+2],r},u.bufferHermite=function(r,t,e,f,u,n,i,o,s,b,a){var h=i*i,c=h*(i-2)+i,l=h*(2*i-3)+1,p=h*(3-2*i),I=h*(i-1);return r[t]=c*e[f]+l*u[n]+p*o[s]+I*b[a],r[t+1]=c*e[f+1]+l*u[n+1]+p*o[s+1]+I*b[a+1],r[t+2]=c*e[f+2]+l*u[n+2]+p*o[s+2]+I*b[a+2],r},u.bufferBezier=function(r,t,e,f,u,n,i,o,s,b,a){var h=i*i,c=1-i,l=c*c,p=3*l*i,I=l*c,_=h*i,S=3*c*h;return r[t]=p*e[f]+I*u[n]+_*o[s]+S*b[a],r[t+1]=p*e[f+1]+I*u[n+1]+_*o[s+1]+S*b[a+1],r[t+2]=p*e[f+2]+I*u[n+2]+_*o[s+2]+S*b[a+2],r},u.bufferCatmullRom=function(r,t,e,f,u,n,i,o,s,b,a){var h=i*i,c=-.5*i,l=c*(h+1)+h,p=c*(5*i-3*h)+1,I=c*(3*h-4*i-1),_=c*(i-h);return r[t]=l*e[f]+p*u[n]+I*o[s]+_*b[a],r[t+1]=l*e[f+1]+p*u[n+1]+I*o[s+1]+_*b[a+1],r[t+2]=l*e[f+2]+p*u[n+2]+I*o[s+2]+_*b[a+2],r}},function(r,t,e){"use strict";var f=e(0),u=e(2),n=e(5),i=r.exports=function(){this.buffer=new Float32Array(16),this.buffer[0]=this.buffer[5]=this.buffer[10]=this.buffer[15]=1};i.prototype.setFromArray=function(r){return this.buffer[0]=r[0],this.buffer[1]=r[1],this.buffer[2]=r[2],this.buffer[3]=r[3],this.buffer[4]=r[4],this.buffer[5]=r[5],this.buffer[6]=r[6],this.buffer[7]=r[7],this.buffer[8]=r[8],this.buffer[9]=r[9],this.buffer[10]=r[10],this.buffer[11]=r[11],this.buffer[12]=r[12],this.buffer[13]=r[13],this.buffer[14]=r[14],this.buffer[15]=r[15],this},i.prototype.setColumnVec4=function(r,t){var e=4*r,f=t.buffer;return this.buffer[e]=f[0],this.buffer[e+1]=f[1],this.buffer[e+2]=f[2],this.buffer[e+3]=f[3],this},i.prototype.setFromColumnsVec4=function(r,t,e,f){var u=r.buffer;return this.buffer[0]=u[0],this.buffer[1]=u[1],this.buffer[2]=u[2],this.buffer[3]=u[3],u=t.buffer,this.buffer[4]=u[0],this.buffer[5]=u[1],this.buffer[6]=u[2],this.buffer[7]=u[3],u=e.buffer,this.buffer[8]=u[0],this.buffer[9]=u[1],this.buffer[10]=u[2],this.buffer[11]=u[3],u=f.buffer,this.buffer[12]=u[0],this.buffer[13]=u[1],this.buffer[14]=u[2],this.buffer[15]=u[3],this},i.prototype.setColumnVec3=function(r,t){var e=4*r,f=t.buffer;return this.buffer[e]=f[0],this.buffer[e+1]=f[1],this.buffer[e+2]=f[2],this.buffer[e+3]=3===r?1:0,this},i.prototype.setFromColumnsVec3=function(r,t,e,f){var u=r.buffer;return this.buffer[0]=u[0],this.buffer[1]=u[1],this.buffer[2]=u[2],this.buffer[3]=0,u=t.buffer,this.buffer[4]=u[0],this.buffer[5]=u[1],this.buffer[6]=u[2],this.buffer[7]=0,u=e.buffer,this.buffer[8]=u[0],this.buffer[9]=u[1],this.buffer[10]=u[2],this.buffer[11]=0,u=f.buffer,this.buffer[12]=u[0],this.buffer[13]=u[1],this.buffer[14]=u[2],this.buffer[15]=1,this},i.prototype.setRotationFromQuat=function(r){return i.bufferSetRotationFromQuat(this.buffer,0,r.buffer,0),this},i.prototype.setRotScaleFromMat3=function(r){return i.bufferSetRotScaleFromMat3(this.buffer,0,r.buffer,0),this},i.prototype.setFromTRSTransfo=function(r,t,e){return i.bufferSetFromTRSTransfo(this.buffer,0,r.buffer,0,t.buffer,0,e.buffer,0),this},i.prototype.setIdentity=function(){return this.buffer[0]=this.buffer[5]=this.buffer[10]=this.buffer[15]=1,this.buffer[1]=this.buffer[2]=this.buffer[3]=this.buffer[4]=this.buffer[6]=this.buffer[7]=this.buffer[8]=this.buffer[9]=this.buffer[11]=this.buffer[12]=this.buffer[13]=this.buffer[14]=0,this},i.prototype.copy=function(r){var t=r.buffer;return this.buffer[0]=t[0],this.buffer[1]=t[1],this.buffer[2]=t[2],this.buffer[3]=t[3],this.buffer[4]=t[4],this.buffer[5]=t[5],this.buffer[6]=t[6],this.buffer[7]=t[7],this.buffer[8]=t[8],this.buffer[9]=t[9],this.buffer[10]=t[10],this.buffer[11]=t[11],this.buffer[12]=t[12],this.buffer[13]=t[13],this.buffer[14]=t[14],this.buffer[15]=t[15],this},i.prototype.getTRSTransfo=function(r,t,e){return i.bufferGetTRSTransfo(r.buffer,0,t.buffer,0,e.buffer,0,this.buffer,0),this},i.prototype.normalizeTRSTransfo=function(r){return i.bufferNormalizeTRSTransfo(this.buffer,0,r.buffer,0),this},i.prototype.normalizeTRSTransfoInPlace=function(){return i.bufferNormalizeTRSTransfo(this.buffer,0,this.buffer,0),this},i.prototype.isIdentity=function(){return i.bufferIsIdentity(this.buffer,0)},i.prototype.equals=function(r){return i.bufferEquals(this.buffer,0,r.buffer,0)},i.prototype.multiply=function(r,t){return i.bufferMultiply(this.buffer,0,r.buffer,0,t.buffer,0),this},i.prototype.multiplyInPlace=function(r){return i.bufferMultiply(this.buffer,0,this.buffer,0,r.buffer,0),this},i.prototype.invert=function(r){return i.bufferInvert(this.buffer,0,r.buffer,0),this},i.prototype.invertInPlace=function(){return i.bufferInvert(this.buffer,0,this.buffer,0),this},i.prototype.transpose=function(r){return i.bufferTranspose(this.buffer,0,r.buffer,0),this},i.prototype.transposeInPlace=function(){return i.bufferTranspose(this.buffer,0,this.buffer,0),this},i.prototype.transformVec4=function(r,t){return i.bufferTransformVec4(r.buffer,0,this.buffer,0,t.buffer,0),r},i.prototype.transformVec4InPlace=function(r){return i.bufferTransformVec4(r.buffer,0,this.buffer,0,r.buffer,0),r},i.prototype.transformVec3Pos=function(r,t){return i.bufferTransformVec3Pos(r.buffer,0,this.buffer,0,t.buffer,0),r},i.prototype.transformVec3PosInPlace=function(r){return i.bufferTransformVec3Pos(r.buffer,0,this.buffer,0,r.buffer,0),r},i.prototype.transformVec3Dir=function(r,t){return i.bufferTransformVec3Dir(r.buffer,0,this.buffer,0,t.buffer,0),r},i.prototype.transformVec3DirInPlace=function(r){return i.bufferTransformVec3Dir(r.buffer,0,this.buffer,0,r.buffer,0),r},i.prototype.buildFrustumProj=function(r,t,e,f,u,n){return i.bufferBuildFrustumProj(this.buffer,0,r,t,e,f,u,n),this},i.prototype.buildPerspectiveProj=function(r,t,e,f){return i.bufferBuildPerspectiveProj(this.buffer,0,r,t,e,f),this},i.prototype.buildOrthoProj=function(r,t,e,f,u,n){return i.bufferBuildOrthoProj(this.buffer,0,r,t,e,f,u,n),this},i.prototype.buildLookAtView=function(r,t,e){return i.bufferBuildLookAtView(this.buffer,0,r.buffer,0,t.buffer,0,e.buffer,0),this},i.prototype.buildFPSView=function(r,t,e){return i.bufferBuildFPSView(this.buffer,0,r.buffer,0,t,e),this},i.NB_COMPONENTS=16,i.IDENTITY=new i,i.createBuffer=function(r){r*=16;for(var t=new Float32Array(r),e=0;e<r;e+=16)t[e]=t[e+5]=t[e+10]=t[e+15]=1;return t},i.bufferSetRotationFromQuat=function(r,t,e,f){var u=e[f],n=e[f+1],i=e[f+2],o=e[f+3],s=u+u,b=s*u,a=s*n,h=s*i,c=s*o,l=n+n,p=l*n,I=l*i,_=l*o,S=i+i,E=S*i,N=S*o;return r[t]=1-p-E,r[t+1]=N+a,r[t+2]=h-_,r[t+3]=0,r[t+4]=a-N,r[t+5]=1-b-E,r[t+6]=c+I,r[t+7]=0,r[t+8]=_+h,r[t+9]=I-c,r[t+10]=1-b-p,r[t+11]=0,r},i.bufferSetRotScaleFromMat3=function(r,t,e,f){return r[t]=e[f],r[t+1]=e[f+1],r[t+2]=e[f+2],r[t+3]=0,r[t+4]=e[f+3],r[t+5]=e[f+4],r[t+6]=e[f+5],r[t+7]=0,r[t+8]=e[f+6],r[t+9]=e[f+7],r[t+10]=e[f+8],r[t+11]=0,r},i.bufferSetFromTRSTransfo=function(r,t,e,f,u,n,i,o){var s=u[n],b=u[n+1],a=u[n+2],h=u[n+3],c=s+s,l=c*s,p=c*b,I=c*a,_=c*h,S=b+b,E=S*b,N=S*a,d=S*h,P=a+a,m=P*a,y=P*h,T=i[o],O=i[o+1],L=i[o+2];return r[t]=(1-E-m)*T,r[t+1]=(y+p)*T,r[t+2]=(I-d)*T,r[t+3]=0,r[t+4]=(p-y)*O,r[t+5]=(1-l-m)*O,r[t+6]=(_+N)*O,r[t+7]=0,r[t+8]=(d+I)*L,r[t+9]=(N-_)*L,r[t+10]=(1-l-E)*L,r[t+11]=0,r[t+12]=e[f],r[t+13]=e[f+1],r[t+14]=e[f+2],r[t+15]=1,r},i.bufferGetTRSTransfo=function(r,t,e,f,i,o,s,b){var a=n._orthoNormalizeTransfo(s,b,4);return i[o]=a[9],i[o+1]=a[10],i[o+2]=a[11],u.bufferSetFromRotationMat3(e,f,a,0),r[t]=s[b+12],r[t+1]=s[b+13],r[t+2]=s[b+14],s},i.bufferNormalizeTRSTransfo=function(r,t,e,f){var u=n._orthoNormalizeTransfo(e,f,4),i=u[9],o=u[10],s=u[11];return r[t]=u[0]*i,r[t+1]=u[1]*i,r[t+2]=u[2]*i,r[t+3]=0,r[t+4]=u[3]*o,r[t+5]=u[4]*o,r[t+6]=u[5]*o,r[t+7]=0,r[t+8]=u[6]*s,r[t+9]=u[7]*s,r[t+10]=u[8]*s,r[t+11]=0,r[t+12]=e[f+12],r[t+13]=e[f+13],r[t+14]=e[f+14],r[t+15]=1,r},i.bufferIsIdentity=function(r,t){return f.abs(r[t]-1)<f.EPSILON&&f.abs(r[t+1])<f.EPSILON&&f.abs(r[t+2])<f.EPSILON&&f.abs(r[t+3])<f.EPSILON&&f.abs(r[t+4])<f.EPSILON&&f.abs(r[t+5]-1)<f.EPSILON&&f.abs(r[t+6])<f.EPSILON&&f.abs(r[t+7])<f.EPSILON&&f.abs(r[t+8])<f.EPSILON&&f.abs(r[t+9])<f.EPSILON&&f.abs(r[t+10]-1)<f.EPSILON&&f.abs(r[t+11])<f.EPSILON&&f.abs(r[t+12])<f.EPSILON&&f.abs(r[t+13])<f.EPSILON&&f.abs(r[t+14])<f.EPSILON&&f.abs(r[t+15]-1)<f.EPSILON},i.bufferEquals=function(r,t,e,u){return r===e&&t===u||f.abs(e[u]-r[t])<f.EPSILON&&f.abs(e[u+1]-r[t+1])<f.EPSILON&&f.abs(e[u+2]-r[t+2])<f.EPSILON&&f.abs(e[u+3]-r[t+3])<f.EPSILON&&f.abs(e[u+4]-r[t+4])<f.EPSILON&&f.abs(e[u+5]-r[t+5])<f.EPSILON&&f.abs(e[u+6]-r[t+6])<f.EPSILON&&f.abs(e[u+7]-r[t+7])<f.EPSILON&&f.abs(e[u+8]-r[t+8])<f.EPSILON&&f.abs(e[u+9]-r[t+9])<f.EPSILON&&f.abs(e[u+10]-r[t+10])<f.EPSILON&&f.abs(e[u+11]-r[t+11])<f.EPSILON&&f.abs(e[u+12]-r[t+12])<f.EPSILON&&f.abs(e[u+13]-r[t+13])<f.EPSILON&&f.abs(e[u+14]-r[t+14])<f.EPSILON&&f.abs(e[u+15]-r[t+15])<f.EPSILON},i.bufferMultiply=function(r,t,e,f,u,n){var i=e[f],o=e[f+1],s=e[f+2],b=e[f+3],a=e[f+4],h=e[f+5],c=e[f+6],l=e[f+7],p=e[f+8],I=e[f+9],_=e[f+10],S=e[f+11],E=e[f+12],N=e[f+13],d=e[f+14],P=e[f+15],m=u[n],y=u[n+1],T=u[n+2],O=u[n+3];return r[t]=m*i+y*a+T*p+O*E,r[t+1]=m*o+y*h+T*I+O*N,r[t+2]=m*s+y*c+T*_+O*d,r[t+3]=m*b+y*l+T*S+O*P,m=u[n+4],y=u[n+5],T=u[n+6],O=u[n+7],r[t+4]=m*i+y*a+T*p+O*E,r[t+5]=m*o+y*h+T*I+O*N,r[t+6]=m*s+y*c+T*_+O*d,r[t+7]=m*b+y*l+T*S+O*P,m=u[n+8],y=u[n+9],T=u[n+10],O=u[n+11],r[t+8]=m*i+y*a+T*p+O*E,r[t+9]=m*o+y*h+T*I+O*N,r[t+10]=m*s+y*c+T*_+O*d,r[t+11]=m*b+y*l+T*S+O*P,m=u[n+12],y=u[n+13],T=u[n+14],O=u[n+15],r[t+12]=m*i+y*a+T*p+O*E,r[t+13]=m*o+y*h+T*I+O*N,r[t+14]=m*s+y*c+T*_+O*d,r[t+15]=m*b+y*l+T*S+O*P,r},i.bufferInvert=function(r,t,e,u){var n=e[u],i=e[u+1],o=e[u+2],s=e[u+3],b=e[u+4],a=e[u+5],h=e[u+6],c=e[u+7],l=e[u+8],p=e[u+9],I=e[u+10],_=e[u+11],S=e[u+12],E=e[u+13],N=e[u+14],d=e[u+15],P=n*a-b*i,m=n*h-b*o,y=n*c-b*s,T=i*h-a*o,O=i*c-a*s,L=o*c-h*s,g=I*d-N*_,v=p*d-E*_,R=p*N-E*I,A=l*d-S*_,w=l*N-S*I,F=l*E-S*p,D=P*g-m*v+y*R+T*A-O*w+L*F;return f.abs(D)<f.EPSILON?(r[t]=r[t+1]=r[t+2]=r[t+3]=r[t+4]=r[t+5]=r[t+6]=r[t+7]=r[t+8]=r[t+9]=r[t+10]=r[t+11]=r[t+12]=r[t+13]=r[t+14]=r[t+15]=D>=0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY,r):(D=1/D,r[t]=(a*g-h*v+c*R)*D,r[t+1]=(o*v-i*g-s*R)*D,r[t+2]=(E*L-N*O+d*T)*D,r[t+3]=(I*O-p*L-_*T)*D,r[t+4]=(h*A-b*g-c*w)*D,r[t+5]=(n*g-o*A+s*w)*D,r[t+6]=(N*y-S*L-d*m)*D,r[t+7]=(l*L-I*y+_*m)*D,r[t+8]=(b*v-a*A+c*F)*D,r[t+9]=(i*A-n*v-s*F)*D,r[t+10]=(S*O-E*y+d*P)*D,r[t+11]=(p*y-l*O-_*P)*D,r[t+12]=(a*w-b*R-h*F)*D,r[t+13]=(n*R-i*w+o*F)*D,r[t+14]=(E*m-S*T-N*P)*D,r[t+15]=(l*T-p*m+I*P)*D,r)},i.bufferTranspose=function(r,t,e,f){var u=e[f+1],n=e[f+2],i=e[f+3],o=e[f+6],s=e[f+7],b=e[f+11];return r[t]=e[f],r[t+1]=e[f+4],r[t+2]=e[f+8],r[t+3]=e[f+12],r[t+4]=u,r[t+5]=e[f+5],r[t+6]=e[f+9],r[t+7]=e[f+13],r[t+8]=n,r[t+9]=o,r[t+10]=e[f+10],r[t+11]=e[f+14],r[t+12]=i,r[t+13]=s,r[t+14]=b,r[t+15]=e[f+15],r},i.bufferTransformVec4=function(r,t,e,f,u,n){var i=u[n],o=u[n+1],s=u[n+2],b=u[n+3];return r[t]=i*e[f]+o*e[f+4]+s*e[f+8]+b*e[f+12],r[t+1]=i*e[f+1]+o*e[f+5]+s*e[f+9]+b*e[f+13],r[t+2]=i*e[f+2]+o*e[f+6]+s*e[f+10]+b*e[f+14],r[t+3]=i*e[f+3]+o*e[f+7]+s*e[f+11]+b*e[f+15],r},i.bufferTransformVec3Pos=function(r,t,e,f,u,n){var i=u[n],o=u[n+1],s=u[n+2];return r[t]=i*e[f]+o*e[f+4]+s*e[f+8]+e[f+12],r[t+1]=i*e[f+1]+o*e[f+5]+s*e[f+9]+e[f+13],r[t+2]=i*e[f+2]+o*e[f+6]+s*e[f+10]+e[f+14],r},i.bufferTransformVec3Dir=function(r,t,e,f,u,n){var i=u[n],o=u[n+1],s=u[n+2];return r[t]=i*e[f]+o*e[f+4]+s*e[f+8],r[t+1]=i*e[f+1]+o*e[f+5]+s*e[f+9],r[t+2]=i*e[f+2]+o*e[f+6]+s*e[f+10],r},i.bufferBuildFrustumProj=function(r,t,e,f,u,n,i,o){var s=1/(f-e),b=1/(n-u),a=1/(i-o),h=i+i;return r[t]=h*s,r[t+1]=r[t+2]=r[t+3]=r[t+4]=0,r[t+5]=h*b,r[t+6]=r[t+7]=0,r[t+8]=(f+e)*s,r[t+9]=(n+u)*b,r[t+10]=(o+i)*a,r[t+11]=-1,r[t+12]=r[t+13]=0,r[t+14]=o*h*a,r[t+15]=0,r},i.bufferBuildPerspectiveProj=function(r,t,e,u,n,i){var o=1/f.tan(.5*e),s=1/(n-i);return r[t]=o,r[t+1]=r[t+2]=r[t+3]=r[t+4]=0,r[t+5]=o*u,r[t+6]=r[t+7]=r[t+8]=r[t+9]=0,r[t+10]=(i+n)*s,r[t+11]=-1,r[t+12]=r[t+13]=0,r[t+14]=i*(n+n)*s,r[t+15]=0,r},i.bufferBuildOrthoProj=function(r,t,e,f,u,n,i,o){var s=1/(f-e),b=1/(n-u),a=1/(i-o);return r[t]=s+s,r[t+1]=r[t+2]=r[t+3]=r[t+4]=0,r[t+5]=b+b,r[t+6]=r[t+7]=r[t+8]=r[t+9]=0,r[t+10]=a+a,r[t+11]=0,r[t+12]=-(f+e)*s,r[t+13]=-(n+u)*b,r[t+14]=(o+i)*a,r[t+15]=1,r},i.bufferBuildLookAtView=function(r,t,e,u,n,i,o,s){var b=e[u],a=e[u+1],h=e[u+2],c=o[s],l=o[s+1],p=o[s+2],I=b-n[i],_=a-n[i+1],S=h-n[i+2],E=I*I+_*_+S*S;if(E<f.EPSILON2)return r[t]=r[t+5]=r[t+10]=r[t+15]=1,r[t+1]=r[t+2]=r[t+3]=r[t+4]=r[t+6]=r[t+7]=r[t+8]=r[t+9]=r[t+11]=r[t+12]=r[t+13]=r[t+14]=0,r;var N=l*(S*=E=1/f.sqrt(E))-(_*=E)*p,d=p*(I*=E)-S*c,P=c*_-I*l;(E=N*N+d*d+P*P)<f.EPSILON2?N=d=P=0:(N*=E=1/f.sqrt(E),d*=E,P*=E);var m=_*P-d*S,y=S*N-P*I,T=I*d-N*_;return(E=m*m+y*y+T*T)<f.EPSILON2?m=y=T=0:(m*=E=1/f.sqrt(E),y*=E,T*=E),r[t]=N,r[t+1]=m,r[t+2]=I,r[t+3]=0,r[t+4]=d,r[t+5]=y,r[t+6]=_,r[t+7]=0,r[t+8]=P,r[t+9]=T,r[t+10]=S,r[t+11]=0,r[t+12]=-(N*b+d*a+P*h),r[t+13]=-(m*b+y*a+T*h),r[t+14]=-(I*b+_*a+S*h),r[t+15]=1,r},i.bufferBuildFPSView=function(r,t,e,u,n,i){var o=e[u],s=e[u+1],b=e[u+2],a=f.cos(i),h=f.sin(i),c=f.cos(n),l=f.sin(n),p=h*l,I=-h*c,_=-a*l,S=a*c;return r[t]=a,r[t+1]=0,r[t+2]=h,r[t+3]=0,r[t+4]=p,r[t+5]=c,r[t+6]=_,r[t+7]=0,r[t+8]=I,r[t+9]=l,r[t+10]=S,r[t+11]=0,r[t+12]=-(a*o+p*s+I*b),r[t+13]=-(c*s+l*b),r[t+14]=-(h*o+_*s+S*b),r[t+15]=1,r}},function(r,t,e){"use strict";var f=e(1),u=r.exports=function(r,t,e,u,n){"number"==typeof r&&r>0?r*=.5:r=1,"number"==typeof t&&t>0?t*=.5:t=1,("number"!=typeof e||e<1)&&(e=1),("number"!=typeof u||u<1)&&(u=1);for(var i=(e+1)*(u+1);i>65536;)e>u?e>>=1:u>>=1,i=(e+1)*(u+1);var o=f.INDEX_TYPE.NO_INDEX;i>4&&(o=f.INDEX_TYPE.UNSIGNED_SHORT),f.call(this,f.PRIMITIVE_TYPE.TRIANGLE_STRIP,o),this._dim=[-r,-t,r,t],this._subdivs=[e,u],this._bGenTexCoords=!0===n};u.prototype=Object.create(f.prototype),u.prototype.constructor=u,u.prototype._initAttribConfig=function(){var r=new f.AttribConfig;this._bGenTexCoords&&(r.stride=20),this._attribConfigList[f.ATTRIB_TYPE.VERTEX]=r,this._bGenTexCoords&&((r=new f.AttribConfig).nbComponents=2,r.offset=12,r.stride=20,this._attribConfigList[f.ATTRIB_TYPE.TEX_COORDS]=r),this._pointCount=2*this._subdivs[0]*(this._subdivs[1]+2)-2},u.prototype._initVBO=function(){var r;if(this._indexType===f.INDEX_TYPE.UNSIGNED_SHORT){var t=[],e=this._dim[0],u=this._dim[1],n=(this._dim[2]-this._dim[0])/this._subdivs[0],i=(this._dim[3]-this._dim[1])/this._subdivs[1],o=0,s=0,b=0;if(r=[],this._bGenTexCoords){var a=0,h=0,c=1/this._subdivs[0],l=1/this._subdivs[1];for(s=0;s<=this._subdivs[0];++s){for(b=0;b<this._subdivs[1];++b)r.push(e,u,0,a,h),u+=i,h+=l,s<this._subdivs[0]&&t.push(o++,o+this._subdivs[1]);r.push(e,this._dim[3],0,a,1),s<this._subdivs[0]-1?(e+=n,a+=c):(e=this._dim[2],a=1),s<this._subdivs[0]&&(t.push(o++,o+this._subdivs[1]),s<this._subdivs[0]-1&&t.push(o+this._subdivs[1],o)),u=this._dim[1],h=0}}else for(s=0;s<=this._subdivs[0];++s){for(b=0;b<this._subdivs[1];++b)r.push(e,u,0),u+=i,s<this._subdivs[0]&&t.push(o++,o+this._subdivs[1]);r.push(e,this._dim[3],0),s<this._subdivs[0]-1?e+=n:e=this._dim[2],s<this._subdivs[0]&&(t.push(o++,o+this._subdivs[1]),s<this._subdivs[0]-1&&t.push(o+this._subdivs[1],o)),u=this._dim[1]}this._indexVBO=this._createStaticVBO(new Uint16Array(t),!0)}else r=this._bGenTexCoords?[this._dim[0],this._dim[1],0,0,0,this._dim[2],this._dim[1],0,1,0,this._dim[0],this._dim[3],0,0,1,this._dim[2],this._dim[3],0,1,1]:[this._dim[0],this._dim[1],0,this._dim[2],this._dim[1],0,this._dim[0],this._dim[3],0,this._dim[2],this._dim[3],0];this._attribVBOList[0]=this._createStaticVBO(new Float32Array(r))}}]);
//# sourceMappingURL=neo3d-fdeb8f23b3475280cb0a.min.js.map